(this["webpackJsonpdurablefunctionsmonitor.react"]=this["webpackJsonpdurablefunctionsmonitor.react"]||[]).push([[0],{121:function(e,t,r){e.exports=r(157)},127:function(e,t,r){},129:function(e,t,r){},130:function(e,t,r){},134:function(e,t,r){},136:function(e,t,r){},137:function(e,t,r){},138:function(e,t,r){},139:function(e,t,r){e.exports=r.p+"static/media/logo.9b5d7869.svg"},157:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(14);const i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t&&(t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}r(126),r(127);var s,l=r(15),c=r(228),m=r(225),u=r(216),h=r(72),d=r(230),p=r(215),g=r(18),y=r(92),b=(r(129),r(198)),E=r(235),f=r(101),O=r(234),_=r(232),v=r(205),C=r(206),w=r(207),P=r(208),T=r(202),S=r(209);r(130);let j=Object(l.a)(s=class extends a.Component{render(){const e=this.props.state;return a.createElement("div",null,a.createElement(b.a,{color:e.isLoggedInAnonymously?"secondary":"inherit",onClick:t=>e.menuAnchorElement=t.currentTarget},a.createElement(T.a,null),a.createElement(c.a,{width:5}),a.createElement(E.a,{title:e.isLoggedInAnonymously?"Ensure this endpoint is not exposed to the public!":""},a.createElement(h.a,{color:e.isLoggedInAnonymously?"secondary":"inherit"},e.isLoggedInAnonymously?"Anonymous":e.userName))),!e.isLoggedInAnonymously&&a.createElement(f.a,{anchorEl:e.menuAnchorElement,keepMounted:!0,open:!!e.menuAnchorElement,onClose:()=>e.menuAnchorElement=void 0},a.createElement(O.a,{onClick:()=>e.logout()},"Login under a different name")),a.createElement(_.a,{open:!e.isLoggedIn},a.createElement(v.a,null,!e.errorMessage&&a.createElement("div",null,a.createElement(C.a,{className:"login-progress"},a.createElement(w.a,null)),a.createElement(P.a,null,"Login in progress...")),!!e.errorMessage&&a.createElement("div",null,a.createElement(C.a,{className:"login-progress"},a.createElement(S.a,{color:"secondary",fontSize:"large"})),a.createElement(P.a,{color:"secondary"},"Login failed. ",e.errorMessage)))))}})||s;var D,N,I,k=r(159),M=r(211),F=r(212),A=r(213),x=r(214),z=r(99),R=r.n(z),L=r(7),W=r(5),V=r(233),B=r(210),H=r(98),Y=r.n(H),U=r(97),q=r.n(U);r(134);let J=(D=W.d.bound,Object(l.a)((I=class extends a.Component{render(){const e=this.props.state;return a.createElement(V.a,{className:"message-snackbar",anchorOrigin:{vertical:"top",horizontal:"right"},open:!!e.errorMessage,autoHideDuration:6e3,onClose:this.handleClose},a.createElement(B.a,{className:"error-snackbar-content",message:a.createElement("span",null,a.createElement(q.a,{className:"error-icon"}),e.errorMessage),action:[a.createElement(k.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},a.createElement(Y.a,null))]}))}handleClose(){this.props.state.errorMessage=""}},Object(L.a)(I.prototype,"handleClose",[D],Object.getOwnPropertyDescriptor(I.prototype,"handleClose"),I.prototype),N=I))||N);var K;let G=Object(l.a)(K=class extends a.Component{componentDidMount(){this.props.state.setWindowTitle()}render(){const e=this.props.state;return a.createElement("div",null,a.createElement(k.a,{color:"inherit",onClick:t=>e.menuAnchorElement=t.currentTarget},a.createElement(R.a,null)),a.createElement(f.a,{anchorEl:e.menuAnchorElement,keepMounted:!0,open:!!e.menuAnchorElement,onClose:()=>e.menuAnchorElement=void 0},a.createElement(O.a,{onClick:()=>e.showConnectionParamsDialog()},"Manage Storage Connection Settings..."),a.createElement(O.a,{onClick:()=>e.showPurgeHistoryDialog()},"Purge Instance History...")),a.createElement(_.a,{open:e.connectionParamsDialogOpen,onClose:()=>e.connectionParamsDialogOpen=!1},a.createElement(M.a,null,"Manage Storage Connection Settings"),a.createElement(v.a,null,e.inProgress?a.createElement(F.a,null):a.createElement(c.a,{height:4}),a.createElement(P.a,null,e.isReadonly?"Change the below values via your application settings ('DFM_HUB_NAME' and 'AzureWebJobsStorage' respectively":"The below values will be saved to local.settings.json file."),a.createElement(A.a,{autoFocus:!0,margin:"dense",label:"Hub Name",fullWidth:!0,disabled:e.inProgress,InputProps:{readOnly:e.isReadonly},InputLabelProps:{shrink:!0},value:e.hubName,onChange:t=>e.hubName=t.target.value}),a.createElement(A.a,{autoFocus:!0,margin:"dense",label:"Azure Storage Connection String",fullWidth:!0,disabled:e.inProgress,InputProps:{readOnly:e.isReadonly},InputLabelProps:{shrink:!0},value:e.connectionString,onChange:t=>e.connectionString=t.target.value}),a.createElement(J,{state:e})),a.createElement(x.a,null,a.createElement(b.a,{onClick:()=>e.connectionParamsDialogOpen=!1,color:"primary"},"Cancel"),!e.isReadonly&&a.createElement(b.a,{onClick:()=>e.saveConnectionParams(),disabled:!e.isDirty||!e.hubName||!e.connectionString||e.inProgress,color:"secondary"},"Save"))))}})||K;var $=r(217),Z=r(162),Q=r(163),X=r(231),ee=r(167),te=r(218),re=r(219),ae=r(229),ne=r(165),ie=r(220),oe=r(221),se=r(222),le=r(223),ce=r(237),me=r(224),ue=r(103),he=r(226),de=r(68),pe=r.n(de),ge=(r(136),r(20)),ye=r.n(ge);class be{static getDateTimeValue(e){var t=new Date(e.target.value.slice(0,16)+":00Z");try{t.toISOString()}catch(r){t=new Date}return t}static momentAsUtc(e){if(!e||!e.isValid())return e;const t=ye()(e.toISOString(!0).slice(0,19)+"Z");return t.utc(),t}static isValidMoment(e){return!!e&&e.isValid()&&e.isAfter(be.MinMoment)&&e.isBefore(be.MaxMoment)}static formatDateTime(e){return e.toISOString().slice(0,16)}}be.MinMoment=ye()("1900-01-01").utc(),be.MaxMoment=ye()("2100-01-01").utc();const Ee=["Timestamp","EventType","Name","ScheduledTime","Result","Details"];class fe{constructor(){this.instanceId=void 0,this.name=void 0,this.entityId=void 0,this.runtimeStatus=void 0,this.entityType=void 0,this.lastEvent=void 0,this.input=void 0,this.customStatus=void 0,this.output=void 0,this.createdTime=void 0,this.lastUpdatedTime=void 0,this.historyEvents=void 0}}const Oe=["instanceId","name","createdTime","lastUpdatedTime","runtimeStatus","lastEvent","input","output","customStatus"];var _e,ve,Ce;let we=(_e=W.d.bound,Object(l.a)((Ce=class extends a.Component{render(){return this.props.backendClient.isVsCode?a.createElement(p.a,{href:"#",onClick:this.onLinkClicked},this.props.orchestrationId):a.createElement(p.a,{href:"/orchestrations/".concat(this.extraSanitizeHrefComponent(this.props.orchestrationId)),target:"_blank"},this.props.orchestrationId)}onLinkClicked(){this.props.backendClient.call("OpenInNewWindow",this.props.orchestrationId)}extraSanitizeHrefComponent(e){return e.replace(/javascript:/gi,"")}},Object(L.a)(Ce.prototype,"onLinkClicked",[_e],Object.getOwnPropertyDescriptor(Ce.prototype,"onLinkClicked"),Ce.prototype),ve=Ce))||ve);var Pe,Te,Se=r(10);r(51);let je=(Pe=class{constructor(){Object(Se.a)(this,"errorMessage",Te,this)}},Te=Object(L.a)(Pe.prototype,"errorMessage",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Pe);var De,Ne,Ie,ke,Me,Fe,Ae,xe,ze,Re,Le,We;let Ve,Be;!function(e){e[e.Equals=0]="Equals",e[e.StartsWith=1]="StartsWith",e[e.Contains=2]="Contains"}(Ve||(Ve={})),function(e){e[e.ShowBoth=0]="ShowBoth",e[e.OrchestrationsOnly=1]="OrchestrationsOnly",e[e.DurableEntitiesOnly=2]="DurableEntitiesOnly"}(Be||(Be={}));let He=(De=class extends je{get inProgress(){return this._inProgress}get orchestrations(){return this._orchestrations}get autoRefresh(){return this._autoRefresh}set autoRefresh(e){this._autoRefresh=e,this._localStorage.setItem("autoRefresh",this._autoRefresh.toString()),this.loadOrchestrations(!0)}get timeFrom(){return this._timeFrom}set timeFrom(e){this._timeFrom=e,this.resetOrderBy()}get timeTill(){return this._timeTill?this._timeTill:ye()().utc()}set timeTill(e){this._timeTill=e,this.resetOrderBy()}get timeTillEnabled(){return!!this._timeTill}set timeTillEnabled(e){this._timeTill=e?ye()().utc():null,e||(this.resetOrderBy(),this.reloadOrchestrations())}get orderByDirection(){return this._orderByDirection}get orderBy(){return this._orderBy}set orderBy(e){this._orderBy!==e?this._orderBy=e:this._orderByDirection="desc"===this._orderByDirection?"asc":"desc",this.reloadOrchestrations()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e}get filterOperator(){return this._filterOperator}set filterOperator(e){this._filterOperator=e,this._filterValue&&"0"!==this._filteredColumn&&this.reloadOrchestrations()}get filteredColumn(){return this._filteredColumn}set filteredColumn(e){this._filteredColumn=e,this._filterValue&&("0"===this._filteredColumn&&(this._filterValue=""),this.reloadOrchestrations())}get showEntityType(){return Be[this._showEntityType]}set showEntityType(e){this._showEntityType=Be[e],this.reloadOrchestrations()}get showLastEventColumn(){return"lastEvent"===this._filteredColumn&&!!this._oldFilterValue}get backendClient(){return this._backendClient}constructor(e,t){var r;super(),this._backendClient=e,this._localStorage=t,Object(Se.a)(this,"_inProgress",Ne,this),Object(Se.a)(this,"_orchestrations",Ie,this),Object(Se.a)(this,"_orderByDirection",ke,this),Object(Se.a)(this,"_orderBy",Me,this),Object(Se.a)(this,"_autoRefresh",Fe,this),Object(Se.a)(this,"_timeFrom",Ae,this),Object(Se.a)(this,"_timeTill",xe,this),Object(Se.a)(this,"_filterValue",ze,this),Object(Se.a)(this,"_filterOperator",Re,this),Object(Se.a)(this,"_filteredColumn",Le,this),Object(Se.a)(this,"_showEntityType",We,this),this._noMorePagesToLoad=!1,this._pageSize=50,this._autoRefreshToken=void 0,this._oldFilterValue="",this._oldTimeFrom=void 0,this._oldTimeTill=void 0;const a=this._localStorage.getItem("timeFrom");(r=a?ye()(a):ye()().subtract(1,"days")).utc(),this._timeFrom=r,this._oldTimeFrom=r;const n=this._localStorage.getItem("timeTill");n&&(this._timeTill=ye()(n),this._timeTill.utc(),this._oldTimeTill=this._timeTill);const i=this._localStorage.getItem("filteredColumn");i&&(this._filteredColumn=i);const o=this._localStorage.getItem("filterOperator");o&&(this._filterOperator=Ve[o]);const s=this._localStorage.getItem("filterValue");s&&(this._filterValue=s,this._oldFilterValue=s);const l=this._localStorage.getItem("showEntityType");l&&(this._showEntityType=Be[l]);const c=this._localStorage.getItem("autoRefresh");c&&(this._autoRefresh=Number(c));const m=this._localStorage.getItem("orderBy");m&&(this._orderBy=m);const u=this._localStorage.getItem("orderByDirection");u&&(this._orderByDirection=u)}applyTimeFrom(){be.isValidMoment(this._timeFrom)&&this._oldTimeFrom!==this._timeFrom&&this.reloadOrchestrations()}applyTimeTill(){be.isValidMoment(this._timeTill)&&this._oldTimeTill!==this._timeTill&&this.reloadOrchestrations()}applyFilterValue(){this._oldFilterValue!==this._filterValue&&this.reloadOrchestrations()}reloadOrchestrations(){this._orchestrations=[],this._noMorePagesToLoad=!1,be.isValidMoment(this._timeFrom)||(this._timeFrom=this._oldTimeFrom),this._timeTill&&!be.isValidMoment(this._timeTill)&&(this._timeTill=this._oldTimeTill),this._localStorage.setItems([{fieldName:"timeFrom",value:this._timeFrom.toISOString()},{fieldName:"timeTill",value:this._timeTill?this._timeTill.toISOString():null},{fieldName:"filteredColumn",value:this._filteredColumn},{fieldName:"filterOperator",value:Ve[this._filterOperator]},{fieldName:"filterValue",value:this._filterValue?this._filterValue:null},{fieldName:"showEntityType",value:Be[this._showEntityType]},{fieldName:"orderBy",value:this._orderBy},{fieldName:"orderByDirection",value:this._orderByDirection}]),this.loadOrchestrations(),this._oldFilterValue=this._filterValue,this._oldTimeFrom=this._timeFrom,this._oldTimeTill=this._timeTill}loadOrchestrations(e=!1){if(this.inProgress||this._noMorePagesToLoad&&!this._autoRefresh)return;this._inProgress=!0;const t=this._timeFrom.toISOString(),r=this._timeTill?this._timeTill.toISOString():ye()().utc().toISOString();var a="&$filter=createdTime ge '".concat(t,"' and createdTime le '").concat(r,"'");if(this._showEntityType===Be.OrchestrationsOnly?a+=" and entityType eq 'Orchestration'":this._showEntityType===Be.DurableEntitiesOnly&&(a+=" and entityType eq 'DurableEntity'"),this._filterValue&&"0"!==this._filteredColumn)switch(a+=" and ",this._filterOperator){case Ve.Equals:a+="".concat(this._filteredColumn," eq '").concat(this._filterValue,"'");break;case Ve.StartsWith:a+="startswith(".concat(this._filteredColumn,", '").concat(this._filterValue,"')");break;case Ve.Contains:a+="contains(".concat(this._filteredColumn,", '").concat(this._filterValue,"')")}const n=e?0:this._orchestrations.length,i=this._orderBy?"&$orderby=".concat(this._orderBy," ").concat(this.orderByDirection):"",o="/orchestrations?$top=".concat(this._pageSize,"&$skip=").concat(n).concat(a).concat(i);this._backendClient.call("GET",o).then(t=>{t.length?e?this._orchestrations=t:this._orchestrations.push(...t):this._noMorePagesToLoad=!0,this._autoRefresh&&(this._autoRefreshToken&&clearTimeout(this._autoRefreshToken),this._autoRefreshToken=setTimeout(()=>this.loadOrchestrations(!0),1e3*this._autoRefresh))},e=>{this._autoRefresh=0,this.errorMessage="Load failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}resetOrderBy(){this._orderBy="",this._orderByDirection="asc"}},Object(L.a)(De.prototype,"inProgress",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"inProgress"),De.prototype),Object(L.a)(De.prototype,"orchestrations",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"orchestrations"),De.prototype),Object(L.a)(De.prototype,"autoRefresh",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"autoRefresh"),De.prototype),Object(L.a)(De.prototype,"timeFrom",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"timeFrom"),De.prototype),Object(L.a)(De.prototype,"timeTill",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"timeTill"),De.prototype),Object(L.a)(De.prototype,"timeTillEnabled",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"timeTillEnabled"),De.prototype),Object(L.a)(De.prototype,"orderByDirection",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"orderByDirection"),De.prototype),Object(L.a)(De.prototype,"orderBy",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"orderBy"),De.prototype),Object(L.a)(De.prototype,"filterValue",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"filterValue"),De.prototype),Object(L.a)(De.prototype,"filterOperator",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"filterOperator"),De.prototype),Object(L.a)(De.prototype,"filteredColumn",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"filteredColumn"),De.prototype),Object(L.a)(De.prototype,"showEntityType",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"showEntityType"),De.prototype),Object(L.a)(De.prototype,"showLastEventColumn",[W.e],Object.getOwnPropertyDescriptor(De.prototype,"showLastEventColumn"),De.prototype),Ne=Object(L.a)(De.prototype,"_inProgress",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ie=Object(L.a)(De.prototype,"_orchestrations",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ke=Object(L.a)(De.prototype,"_orderByDirection",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"asc"}}),Me=Object(L.a)(De.prototype,"_orderBy",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Fe=Object(L.a)(De.prototype,"_autoRefresh",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ae=Object(L.a)(De.prototype,"_timeFrom",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=Object(L.a)(De.prototype,"_timeTill",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=Object(L.a)(De.prototype,"_filterValue",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Re=Object(L.a)(De.prototype,"_filterOperator",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ve.Equals}}),Le=Object(L.a)(De.prototype,"_filteredColumn",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0"}}),We=Object(L.a)(De.prototype,"_showEntityType",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Be.ShowBoth}}),De);var Ye,Ue,qe;let Je=(Ye=W.d.bound,Object(l.a)((qe=class extends a.Component{componentDidMount(){this.props.state.loadOrchestrations(),document.addEventListener("scroll",e=>{const t=e.target.scrollingElement;if(!t)return;t.scrollHeight-window.innerHeight-t.scrollTop<100&&this.props.state.loadOrchestrations()})}render(){const e=this.props.state;return a.createElement(a.Fragment,null,e.inProgress?a.createElement(F.a,null):a.createElement(c.a,{height:4}),a.createElement(u.a,{variant:"dense",className:"top-toolbar"},a.createElement($.a,{container:!0,className:"toolbar-grid1"},a.createElement($.a,{item:!0,xs:12},a.createElement(he.a,{className:"from-input",style:{marginLeft:10},ampm:!1,autoOk:!0,label:"From \xa0\xa0 (UTC)",invalidDateMessage:"",format:"YYYY-MM-DD HH:mm:ss",disabled:e.inProgress,value:e.timeFrom,onChange:t=>e.timeFrom=be.momentAsUtc(t),onBlur:()=>e.applyTimeFrom(),onAccept:()=>e.applyTimeFrom(),onKeyPress:this.handleKeyPress})),a.createElement($.a,{item:!0,xs:12,className:"toolbar-grid1-item2"},a.createElement(Z.a,null,a.createElement(Q.a,{className:"till-label",htmlFor:"till-checkbox",shrink:!0},"Till"),a.createElement(X.a,{id:"till-checkbox",className:"till-checkbox",disabled:e.inProgress,checked:e.timeTillEnabled,onChange:t=>e.timeTillEnabled=t.target.checked})),e.timeTillEnabled?a.createElement(he.a,{className:"till-input",ampm:!1,autoOk:!0,label:"(UTC)",invalidDateMessage:"",format:"YYYY-MM-DD HH:mm:ss",disabled:e.inProgress,value:e.timeTill,onChange:t=>e.timeTill=be.momentAsUtc(t),onBlur:()=>e.applyTimeTill(),onAccept:()=>e.applyTimeTill(),onKeyPress:this.handleKeyPress}):a.createElement(A.a,{className:"till-input",label:"(UTC)",placeholder:"[Now]",InputLabelProps:{shrink:!0},type:"text",disabled:!0}))),a.createElement($.a,{container:!0,className:"toolbar-grid2"},a.createElement($.a,{item:!0,xs:12},a.createElement(Z.a,null,a.createElement(Q.a,{htmlFor:"filtered-column-select"},"Filtered Column"),a.createElement(ee.a,{className:"toolbar-select filtered-column-input",disabled:e.inProgress,value:e.filteredColumn,onChange:t=>e.filteredColumn=t.target.value,inputProps:{id:"filtered-column-select"}},a.createElement(O.a,{value:"0"},"[Not Selected]"),Oe.map(e=>a.createElement(O.a,{key:e,value:e},e)))),a.createElement(Z.a,{className:"toolbar-grid2-item1-select"},a.createElement(Q.a,{htmlFor:"filter-operator-select"},"Filter Operator"),a.createElement(ee.a,{className:"toolbar-select",disabled:e.inProgress,value:e.filterOperator,onChange:t=>e.filterOperator=t.target.value,inputProps:{id:"filter-operator-select"}},a.createElement(O.a,{value:0},"Equals"),a.createElement(O.a,{value:1},"Starts With"),a.createElement(O.a,{value:2},"Contains")))),a.createElement($.a,{item:!0,xs:12,className:"toolbar-grid2-item2"},a.createElement(A.a,{className:"filter-value-input",label:"Filter Value",InputLabelProps:{shrink:!0},placeholder:"[some text or 'null']",disabled:"0"===e.filteredColumn||e.inProgress,value:e.filterValue,onChange:t=>e.filterValue=t.target.value,onBlur:()=>e.applyFilterValue(),onKeyPress:this.handleKeyPress}))),a.createElement(te.a,{value:e.showEntityType,onChange:t=>e.showEntityType=t.target.value},a.createElement(re.a,{className:"entity-type-radio",disabled:e.inProgress,value:Be[Be.ShowBoth],control:a.createElement(ae.a,null),label:a.createElement(h.a,{variant:"subtitle2"},"Show both")}),a.createElement(re.a,{className:"entity-type-radio",disabled:e.inProgress,value:Be[Be.OrchestrationsOnly],control:a.createElement(ae.a,null),label:a.createElement(h.a,{variant:"subtitle2"},"Orchestrations only")}),a.createElement(re.a,{className:"entity-type-radio",disabled:e.inProgress,value:Be[Be.DurableEntitiesOnly],control:a.createElement(ae.a,null),label:a.createElement(h.a,{variant:"subtitle2"},"Durable Entities only")})),a.createElement(h.a,{style:{flex:1}}),a.createElement($.a,{container:!0,className:"toolbar-grid3"},a.createElement($.a,{item:!0,xs:12},a.createElement(Z.a,{className:"form-control-float-right"},a.createElement(Q.a,{htmlFor:"auto-refresh-select"},"Auto-refresh"),a.createElement(ee.a,{className:"toolbar-select",inputProps:{id:"auto-refresh-select"},value:e.autoRefresh,onChange:t=>e.autoRefresh=t.target.value},a.createElement(O.a,{value:0},"Never"),a.createElement(O.a,{value:1},"Every 1 sec."),a.createElement(O.a,{value:5},"Every 5 sec."),a.createElement(O.a,{value:10},"Every 10 sec.")))),a.createElement($.a,{item:!0,xs:12,className:"toolbar-grid3-item2"},a.createElement(b.a,{className:"refresh-button form-control-float-right",variant:"outlined",color:"default",size:"large",onClick:()=>e.reloadOrchestrations()},a.createElement(pe.a,null))))),a.createElement(ne.a,{className:"items-count-label"},e.orchestrations.length?"".concat(e.orchestrations.length," items shown"):""),e.orchestrations.length?this.renderTable(e):this.renderEmptyTable(),e.inProgress&&e.orchestrations.length?a.createElement(F.a,null):a.createElement(c.a,{height:4}),a.createElement(u.a,{variant:"dense"}),a.createElement(J,{state:this.props.state}))}renderEmptyTable(){return a.createElement(h.a,{variant:"h5",className:"empty-table-placeholder"},"This list is empty")}renderTable(e){return a.createElement(ie.a,{size:"small"},a.createElement(oe.a,null,a.createElement(se.a,null,Oe.filter(t=>!!e.showLastEventColumn||"lastEvent"!==t).map(t=>a.createElement(le.a,{key:t},a.createElement(ce.a,{active:e.orderBy===t,direction:e.orderByDirection,onClick:()=>e.orderBy=t},t))))),a.createElement(me.a,null,e.orchestrations.map(t=>{const r={verticalAlign:"top"};return a.createElement(se.a,{key:t.instanceId,className:"runtime-status-"+t.runtimeStatus.toString().toLowerCase()},a.createElement(le.a,{className:"instance-id-cell",style:r},a.createElement(we,{orchestrationId:t.instanceId,backendClient:e.backendClient})),a.createElement(le.a,{className:"name-cell",style:r},t.name),a.createElement(le.a,{className:"datetime-cell",style:r},t.createdTime),a.createElement(le.a,{className:"datetime-cell",style:r},t.lastUpdatedTime),a.createElement(le.a,{style:r},t.runtimeStatus),e.showLastEventColumn&&a.createElement(le.a,{style:r},t.lastEvent),a.createElement(le.a,{className:"long-text-cell",style:r},a.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.input)})),a.createElement(le.a,{className:"output-cell",style:r},a.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.output)})),a.createElement(le.a,{className:"output-cell",style:r},a.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.customStatus)})))})))}handleKeyPress(e){"Enter"===e.key&&(e.preventDefault(),this.props.state.reloadOrchestrations())}},Object(L.a)(qe.prototype,"handleKeyPress",[Ye],Object.getOwnPropertyDescriptor(qe.prototype,"handleKeyPress"),qe.prototype),Ue=qe))||Ue);var Ke;r(137);let Ge=Object(l.a)(Ke=class extends a.Component{render(){const e=this.props.state;return a.createElement(a.Fragment,null,this.renderDialogs(e),a.createElement(b.a,{variant:"outlined",color:"primary",size:"large",onClick:()=>e.purgeConfirmationOpen=!0},"Purge"))}renderDialogs(e){return a.createElement(a.Fragment,null,a.createElement(_.a,{open:e.purgeConfirmationOpen,onClose:()=>e.purgeConfirmationOpen=!1},a.createElement(M.a,null,"Confirm Purge"),a.createElement(v.a,null,a.createElement(P.a,null,"You're about to purge entity '",e.orchestrationId,"'. This operation drops entity state from the underlying storage and cannot be undone. Are you sure?")),a.createElement(x.a,null,a.createElement(b.a,{onClick:()=>e.purgeConfirmationOpen=!1,color:"primary",autoFocus:!0},"Cancel"),a.createElement(b.a,{onClick:()=>e.purge(),color:"secondary"},"Yes, purge"))))}})||Ke;var $e;let Ze=Object(l.a)($e=class extends a.Component{render(){const e=this.props.details;return a.createElement(a.Fragment,null,a.createElement($.a,{container:!0,className:"grid-container"},a.createElement($.a,{item:!0,xs:12,sm:12,md:3,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"entityId.name",value:e.entityId.name,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),a.createElement($.a,{item:!0,xs:12,sm:6,md:3,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"entityId.key",value:e.entityId.key,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),a.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"createdTime",value:e.createdTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),a.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"lastUpdatedTime",value:e.lastUpdatedTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),a.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"runtimeStatus",value:e.runtimeStatus,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,className:e.runtimeStatus?"runtime-status-"+e.runtimeStatus.toLowerCase():""})),a.createElement($.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"input",value:JSON.stringify(e.input,null,3),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:10})),a.createElement($.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"customStatus",value:JSON.stringify(e.customStatus,null,3),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:10}))))}})||$e;var Qe;let Xe=Object(l.a)(Qe=class extends a.Component{render(){const e=this.props.state;return a.createElement(a.Fragment,null,this.renderDialogs(e),a.createElement(b.a,{variant:"outlined",color:"primary",size:"large",onClick:()=>e.rewindConfirmationOpen=!0},"Rewind"),a.createElement(c.a,{width:20}),a.createElement(b.a,{variant:"outlined",color:"primary",size:"large",onClick:()=>e.terminateConfirmationOpen=!0},"Terminate"),a.createElement(c.a,{width:20}),a.createElement(b.a,{variant:"outlined",color:"primary",size:"large",onClick:()=>e.dialogOpen=!0},"Raise Event"),a.createElement(c.a,{width:20}),a.createElement(b.a,{variant:"outlined",color:"primary",size:"large",onClick:()=>e.purgeConfirmationOpen=!0},"Purge"))}renderDialogs(e){return a.createElement(a.Fragment,null,a.createElement(_.a,{open:e.rewindConfirmationOpen,onClose:()=>e.rewindConfirmationOpen=!1},a.createElement(M.a,null,"Confirm Rewind"),a.createElement(v.a,null,a.createElement(P.a,null,"You're about to rewind orchestration '",e.orchestrationId,"'. Are you sure?")),a.createElement(x.a,null,a.createElement(b.a,{onClick:()=>e.rewindConfirmationOpen=!1,color:"primary",autoFocus:!0},"Cancel"),a.createElement(b.a,{onClick:()=>e.rewind(),color:"secondary"},"Yes, rewind"))),a.createElement(_.a,{open:e.terminateConfirmationOpen,onClose:()=>e.terminateConfirmationOpen=!1},a.createElement(M.a,null,"Confirm Terminate"),a.createElement(v.a,null,a.createElement(P.a,null,"You're about to terminate orchestration '",e.orchestrationId,"'. This operation cannot be undone. Are you sure?")),a.createElement(x.a,null,a.createElement(b.a,{onClick:()=>e.terminateConfirmationOpen=!1,color:"primary",autoFocus:!0},"Cancel"),a.createElement(b.a,{onClick:()=>e.terminate(),color:"secondary"},"Yes, terminate"))),a.createElement(_.a,{open:e.dialogOpen,onClose:()=>e.dialogOpen=!1},a.createElement(M.a,null,"Raise Event"),a.createElement(v.a,null,a.createElement(P.a,null,"Provide event name and some additional data."),a.createElement(A.a,{autoFocus:!0,margin:"dense",label:"Event Name",fullWidth:!0,value:e.eventName,onChange:t=>e.eventName=t.target.value}),a.createElement(A.a,{margin:"dense",label:"Event Data (JSON)",fullWidth:!0,multiline:!0,rows:7,value:e.eventData,onChange:t=>e.eventData=t.target.value})),a.createElement(x.a,null,a.createElement(b.a,{onClick:()=>e.dialogOpen=!1,color:"primary"},"Cancel"),a.createElement(b.a,{onClick:()=>e.raiseEvent(),disabled:!e.eventName,color:"secondary"},"Raise"))),a.createElement(_.a,{open:e.purgeConfirmationOpen,onClose:()=>e.purgeConfirmationOpen=!1},a.createElement(M.a,null,"Confirm Purge"),a.createElement(v.a,null,a.createElement(P.a,null,"You're about to purge orchestration '",e.orchestrationId,"'. This operation drops orchestration state from the underlying storage and cannot be undone. Are you sure?")),a.createElement(x.a,null,a.createElement(b.a,{onClick:()=>e.purgeConfirmationOpen=!1,color:"primary",autoFocus:!0},"Cancel"),a.createElement(b.a,{onClick:()=>e.purge(),color:"secondary"},"Yes, purge"))))}})||Qe;var et;let tt=Object(l.a)(et=class extends a.Component{render(){const e=this.props.details;return a.createElement(a.Fragment,null,a.createElement($.a,{container:!0,className:"grid-container"},a.createElement($.a,{item:!0,xs:12,sm:12,md:3,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"name",value:e.name,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),a.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"createdTime",value:e.createdTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),a.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"lastUpdatedTime",value:e.lastUpdatedTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),a.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"runtimeStatus",value:e.runtimeStatus,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,className:e.runtimeStatus?"runtime-status-"+e.runtimeStatus.toLowerCase():""})),a.createElement($.a,{item:!0,xs:12,sm:6,md:3,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"customStatus",value:JSON.stringify(e.customStatus),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),a.createElement($.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"input",value:JSON.stringify(e.input,null,3),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:8})),a.createElement($.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},a.createElement(A.a,{label:"output",value:JSON.stringify(e.output,null,3),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:8}))),a.createElement(ne.a,{className:"history-events-count-label"},"historyEvents: ",e.historyEvents?e.historyEvents.length:0," items"),this.renderTable(e.historyEvents))}renderEmptyTable(){return a.createElement(h.a,{variant:"h5",className:"empty-table-placeholder"},"This list is empty")}renderTable(e){return e&&e.length?a.createElement(ie.a,{size:"small"},a.createElement(oe.a,null,a.createElement(se.a,null,Ee.map(e=>a.createElement(le.a,{key:e},e)))),a.createElement(me.a,null,e.map((e,t)=>{const r={verticalAlign:"top"};return a.createElement(se.a,{key:t},a.createElement(le.a,{style:r},e.Timestamp),a.createElement(le.a,{style:r},e.EventType),a.createElement(le.a,{className:"name-cell",style:r},e.Name?e.Name:e.FunctionName),a.createElement(le.a,{style:r},e.ScheduledTime),a.createElement(le.a,{className:"long-text-cell",style:r},a.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(e.Result)})),a.createElement(le.a,{className:"long-text-cell",style:r},a.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:e.Details})))}))):this.renderEmptyTable()}})||et;var rt;let at=Object(l.a)(rt=class extends a.Component{componentDidMount(){this.props.state.loadDetails()}render(){const e=this.props.state;return a.createElement("div",null,e.inProgress?a.createElement(F.a,null):a.createElement(c.a,{height:4}),a.createElement(u.a,{variant:"dense",className:"top-toolbar"},"Orchestration"===e.details.entityType&&a.createElement(Xe,{state:e}),"DurableEntity"===e.details.entityType&&a.createElement(Ge,{state:e}),a.createElement(c.a,{width:20}),a.createElement(h.a,{style:{flex:1}}),a.createElement(Z.a,null,a.createElement(Q.a,{htmlFor:"auto-refresh-select"},"Auto-refresh"),a.createElement(ee.a,{className:"toolbar-select",value:e.autoRefresh,onChange:t=>e.autoRefresh=t.target.value,inputProps:{id:"auto-refresh-select"}},a.createElement(O.a,{value:0},"Never"),a.createElement(O.a,{value:1},"Every 1 sec."),a.createElement(O.a,{value:5},"Every 5 sec."),a.createElement(O.a,{value:10},"Every 10 sec."))),a.createElement(c.a,{width:20}),a.createElement(b.a,{className:"refresh-button",variant:"outlined",color:"default",size:"large",onClick:()=>e.loadDetails()},a.createElement(pe.a,null))),"Orchestration"===e.details.entityType&&a.createElement(tt,{details:e.details}),"DurableEntity"===e.details.entityType&&a.createElement(Ze,{details:e.details}),e.inProgress?a.createElement(F.a,null):a.createElement(c.a,{height:4}),a.createElement(c.a,{height:10}),a.createElement(J,{state:this.props.state}))}})||rt;var nt,it,ot=r(164),st=r(166);r(138);let lt=Object(l.a)(nt=class extends a.Component{render(){const e=this.props.state;return a.createElement(_.a,{open:e.dialogOpen,onClose:()=>{e.inProgress||(e.dialogOpen=!1)}},a.createElement(M.a,null,"Purge Instance History"),null===e.instancesDeleted&&a.createElement("div",null,a.createElement(v.a,null,e.inProgress?a.createElement(F.a,null):a.createElement(c.a,{height:4}),a.createElement(P.a,null,"WARNING: this operation drops instance states from the underlying storage and cannot be undone.","DurableEntity"===e.entityType&&a.createElement(h.a,{color:"error"},"It might as well remove Durable Entities, that are still active. Ensure that you specify the correct time frame!")),a.createElement(Z.a,{className:"purge-history-statuses",disabled:e.inProgress,fullWidth:!0},a.createElement(ot.a,null,"Apply to:"),a.createElement(te.a,{row:!0,value:e.entityType,onChange:t=>e.entityType=t.target.value},a.createElement(re.a,{disabled:e.inProgress,value:"Orchestration",control:a.createElement(ae.a,null),label:"Orchestrations"}),a.createElement(re.a,{disabled:e.inProgress,value:"DurableEntity",control:a.createElement(ae.a,null),label:"Durable Entities"}))),a.createElement(he.a,{className:"purge-history-from-input",ampm:!1,autoOk:!0,label:"From (UTC)",format:"YYYY-MM-DD HH:mm:ss",variant:"inline",disabled:e.inProgress,value:e.timeFrom,onChange:t=>e.timeFrom=be.momentAsUtc(t)}),a.createElement(he.a,{className:"purge-history-till-input",ampm:!1,autoOk:!0,label:"Till (UTC)",format:"YYYY-MM-DD HH:mm:ss",variant:"inline",disabled:e.inProgress,value:e.timeTill,onChange:t=>e.timeTill=be.momentAsUtc(t)}),a.createElement(Z.a,{className:"purge-history-statuses",disabled:e.inProgress},a.createElement(ot.a,null,"With the following status:"),"Orchestration"===e.entityType&&a.createElement(st.a,{row:!0},a.createElement(ct,{state:e,runtimeStatus:"Completed"}),a.createElement(ct,{state:e,runtimeStatus:"Failed"}),a.createElement(ct,{state:e,runtimeStatus:"Terminated"})),"DurableEntity"===e.entityType&&a.createElement(st.a,{row:!0},a.createElement(E.a,{title:"Durable Entities are always in 'Running' state"},a.createElement(re.a,{control:a.createElement(X.a,{checked:!0}),label:"Running",disabled:!0})))),a.createElement(J,{state:e})),a.createElement(x.a,null,a.createElement(b.a,{onClick:()=>e.dialogOpen=!1,disabled:e.inProgress,color:"primary"},"Cancel"),a.createElement(b.a,{onClick:()=>e.purgeHistory(),disabled:!e.isValid||e.inProgress,color:"secondary"},"Purge"))),null!==e.instancesDeleted&&a.createElement("div",null,a.createElement(v.a,null,a.createElement(P.a,{className:"success-message"},e.instancesDeleted," instances were deleted.")),a.createElement(x.a,null,a.createElement(b.a,{onClick:()=>e.dialogOpen=!1,color:"primary"},"Close"))))}})||nt,ct=Object(l.a)(it=class extends a.Component{render(){const e=this.props.state,t=this.props.runtimeStatus;return a.createElement(re.a,{control:a.createElement(X.a,{checked:e.getStatusIncluded(t),onChange:r=>e.setStatusIncluded(t,r.target.checked)}),label:t})}})||it;var mt;const ut=r(139);let ht=Object(l.a)(mt=class extends a.Component{render(){const e=this.props.state;return a.createElement(g.a,{utils:y.a},a.createElement(a.Fragment,null,!e.loginState&&a.createElement(c.a,{height:20}),!!e.loginState&&a.createElement(m.a,{position:"static",color:"default",className:"app-bar"},a.createElement(u.a,null,e.loginState.isLoggedIn&&!!e.mainMenuState&&a.createElement(G,{state:e.mainMenuState}),a.createElement("img",{src:ut,width:"30px"}),a.createElement(c.a,{width:5}),a.createElement(h.a,{variant:"h6",color:"inherit",className:"title-typography"},"Durable Functions Monitor"),a.createElement(d.a,{color:"inherit"},a.createElement(p.a,{color:"inherit",href:""},"/ instances"),!!e.orchestrationDetailsState&&a.createElement(h.a,{color:"inherit"},e.orchestrationDetailsState.orchestrationId)),a.createElement(h.a,{style:{flex:1}}),a.createElement(j,{state:e.loginState}))),!!e.orchestrationsState&&(!e.loginState||e.loginState.isLoggedIn)&&a.createElement(Je,{state:e.orchestrationsState}),!!e.orchestrationDetailsState&&(!e.loginState||e.loginState.isLoggedIn)&&a.createElement(at,{state:e.orchestrationDetailsState}),a.createElement(lt,{state:e.purgeHistoryDialogState})))}})||mt;var dt=r(70),pt=r.n(dt);class gt{get isVsCode(){return!1}constructor(e){this._getAuthorizationHeaderAsync=e}call(e,t,r){return new Promise((a,n)=>{this._getAuthorizationHeaderAsync().then(i=>{pt.a.request({url:"/a/p/i"+t,method:e,data:r,headers:i}).then(e=>{a(e.data)},n)})})}}var yt,bt,Et,ft,Ot,_t,vt,Ct=r(100);let wt=(yt=W.d.bound,bt=W.d.bound,Et=W.d.bound,ft=class extends je{get isLoggedIn(){return this._isLoggedIn}get isLoggedInAnonymously(){return!this._userName}get userName(){return this._userName}constructor(){super(),Object(Se.a)(this,"menuAnchorElement",Ot,this),Object(Se.a)(this,"_isLoggedIn",_t,this),Object(Se.a)(this,"_userName",vt,this),this._aadApp=void 0,this.login()}login(){const e="".concat("/a/p/i","/easyauth-config");pt.a.get(e).then(this.loginWithEasyAuthConfig,e=>{this.errorMessage="".concat(e.message,".").concat(e.response?e.response.data:"")})}logout(){this.menuAnchorElement=void 0,this._aadApp.logout()}getAuthorizationHeaderAsync(){return this._aadApp?new Promise((e,t)=>{const r={scopes:[this._aadApp.getCurrentConfiguration().auth.clientId]};this._aadApp.acquireTokenSilent(r).then(t=>{var r=t.accessToken;r||(console.log("DFM: accessToken is null, so using idToken.rawIdToken instead"),r=t.idToken.rawIdToken),e({Authorization:"Bearer ".concat(r)})},e=>{console.log("DFM: acquireTokenSilent() failed (".concat(e,"), so calling acquireTokenRedirect()...")),this._aadApp.acquireTokenRedirect(r)})}):new Promise((e,t)=>e())}loginWithEasyAuthConfig(e){const t=e.data;if(!t.clientId)return void(this._isLoggedIn=!0);this._aadApp=new Ct.a({auth:{clientId:t.clientId,authority:t.authority}}),this._aadApp.handleRedirectCallback(()=>{},this.handleRedirectCallbackFailed);const r=this._aadApp.getAccount();r?(this._userName=r.userName,this._isLoggedIn=!0):(console.log("DFM: redirecting user to AAD for login..."),this._aadApp.loginRedirect())}handleRedirectCallbackFailed(e,t){this.errorMessage="Failed to handle login redirect. name: ".concat(e.name,", message: ").concat(e.message,", errorCode: ").concat(e.errorCode,", errorMessage: ").concat(e.errorMessage,", accountState: ").concat(t)}},Object(L.a)(ft.prototype,"isLoggedIn",[W.e],Object.getOwnPropertyDescriptor(ft.prototype,"isLoggedIn"),ft.prototype),Object(L.a)(ft.prototype,"isLoggedInAnonymously",[W.e],Object.getOwnPropertyDescriptor(ft.prototype,"isLoggedInAnonymously"),ft.prototype),Object(L.a)(ft.prototype,"userName",[W.e],Object.getOwnPropertyDescriptor(ft.prototype,"userName"),ft.prototype),Ot=Object(L.a)(ft.prototype,"menuAnchorElement",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(L.a)(ft.prototype,"getAuthorizationHeaderAsync",[yt],Object.getOwnPropertyDescriptor(ft.prototype,"getAuthorizationHeaderAsync"),ft.prototype),_t=Object(L.a)(ft.prototype,"_isLoggedIn",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vt=Object(L.a)(ft.prototype,"_userName",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(L.a)(ft.prototype,"loginWithEasyAuthConfig",[bt],Object.getOwnPropertyDescriptor(ft.prototype,"loginWithEasyAuthConfig"),ft.prototype),Object(L.a)(ft.prototype,"handleRedirectCallbackFailed",[Et],Object.getOwnPropertyDescriptor(ft.prototype,"handleRedirectCallbackFailed"),ft.prototype),ft);var Pt,Tt,St,jt,Dt,Nt,It;let kt=(Pt=class extends je{get inProgress(){return this._inProgress}get isReadonly(){return this._isReadOnly}get isDirty(){return this.connectionString!==this._oldConnectionString||this.hubName!==this._oldHubName}constructor(e,t){super(),this._backendClient=e,this._purgeHistoryDialogState=t,Object(Se.a)(this,"menuAnchorElement",Tt,this),Object(Se.a)(this,"hubName",St,this),Object(Se.a)(this,"connectionString",jt,this),Object(Se.a)(this,"connectionParamsDialogOpen",Dt,this),Object(Se.a)(this,"_inProgress",Nt,this),Object(Se.a)(this,"_isReadOnly",It,this),this._oldConnectionString=void 0,this._oldHubName=void 0}showConnectionParamsDialog(){this.menuAnchorElement=void 0,this.connectionParamsDialogOpen=!0,this._inProgress=!0,this._backendClient.call("GET","/manage-connection").then(e=>{this.connectionString=this._oldConnectionString=e.connectionString,this.hubName=this._oldHubName=e.hubName,this._isReadOnly=e.isReadOnly},e=>{this.errorMessage="Load failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}saveConnectionParams(){this._inProgress=!0,this._backendClient.call("PUT","/manage-connection",{connectionString:this.connectionString!==this._oldConnectionString?this.connectionString:"",hubName:this.hubName}).then(()=>{this.connectionParamsDialogOpen=!1,alert("Your changes were saved to local.settings.json file, but they cannot be picked up automatically. Please, restart the Function Host for them to take effect.")},e=>{this.errorMessage="Save failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}showPurgeHistoryDialog(){this.menuAnchorElement=void 0,this._purgeHistoryDialogState.dialogOpen=!0}setWindowTitle(){this._backendClient.call("GET","/about").then(e=>{document.title="Durable Functions Monitor (".concat(e.accountName,"/").concat(e.hubName,") v").concat(e.version)})}},Tt=Object(L.a)(Pt.prototype,"menuAnchorElement",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=Object(L.a)(Pt.prototype,"hubName",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=Object(L.a)(Pt.prototype,"connectionString",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt=Object(L.a)(Pt.prototype,"connectionParamsDialogOpen",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(L.a)(Pt.prototype,"inProgress",[W.e],Object.getOwnPropertyDescriptor(Pt.prototype,"inProgress"),Pt.prototype),Object(L.a)(Pt.prototype,"isReadonly",[W.e],Object.getOwnPropertyDescriptor(Pt.prototype,"isReadonly"),Pt.prototype),Object(L.a)(Pt.prototype,"isDirty",[W.e],Object.getOwnPropertyDescriptor(Pt.prototype,"isDirty"),Pt.prototype),Nt=Object(L.a)(Pt.prototype,"_inProgress",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),It=Object(L.a)(Pt.prototype,"_isReadOnly",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pt);var Mt,Ft,At,xt,zt,Rt,Lt,Wt,Vt,Bt;let Ht=(Mt=class extends je{get orchestrationId(){return this._orchestrationId}get inProgress(){return this._inProgress}get autoRefresh(){return this._autoRefresh}set autoRefresh(e){this._autoRefresh=e,this._localStorage.setItem("autoRefresh",this._autoRefresh.toString()),this.loadDetails()}get dialogOpen(){return this._dialogOpen}set dialogOpen(e){this._dialogOpen=e,this.eventName="",this.eventData=""}constructor(e,t,r){super(),this._orchestrationId=e,this._backendClient=t,this._localStorage=r,Object(Se.a)(this,"details",Ft,this),Object(Se.a)(this,"rewindConfirmationOpen",At,this),Object(Se.a)(this,"terminateConfirmationOpen",xt,this),Object(Se.a)(this,"purgeConfirmationOpen",zt,this),Object(Se.a)(this,"eventName",Rt,this),Object(Se.a)(this,"eventData",Lt,this),Object(Se.a)(this,"_inProgress",Wt,this),Object(Se.a)(this,"_dialogOpen",Vt,this),Object(Se.a)(this,"_autoRefresh",Bt,this),this._autoRefreshToken=void 0;const a=this._localStorage.getItem("autoRefresh");a&&(this._autoRefresh=Number(a))}rewind(){this.rewindConfirmationOpen=!1;const e="/orchestrations('".concat(this._orchestrationId,"')/rewind");this._inProgress=!0,this._backendClient.call("POST",e).then(()=>{this._inProgress=!1,this.loadDetails()},e=>{this._inProgress=!1,this.errorMessage="Failed to rewind: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}terminate(){this.terminateConfirmationOpen=!1;const e="/orchestrations('".concat(this._orchestrationId,"')/terminate");this._inProgress=!0,this._backendClient.call("POST",e).then(()=>{this._inProgress=!1,this.loadDetails()},e=>{this._inProgress=!1,this.errorMessage="Failed to terminate: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}purge(){this.purgeConfirmationOpen=!1;const e="/orchestrations('".concat(this._orchestrationId,"')/purge");this._inProgress=!0,this._backendClient.call("POST",e).then(()=>{this._inProgress=!1,this.details=new fe},e=>{this._inProgress=!1,this.errorMessage="Failed to purge: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}raiseEvent(){const e="/orchestrations('".concat(this._orchestrationId,"')/raise-event"),t={name:this.eventName,data:null};try{t.data=JSON.parse(this.eventData)}catch(r){return void(this.errorMessage="Event Data failed to parse: ".concat(r.message))}finally{this.dialogOpen=!1}this._inProgress=!0,this._backendClient.call("POST",e,t).then(()=>{this._inProgress=!1,this.loadDetails()},e=>{this._inProgress=!1,this.errorMessage="Failed to raise an event: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}loadDetails(){if(this.inProgress)return;this._inProgress=!0;const e="/orchestrations('".concat(this._orchestrationId,"')");this._backendClient.call("GET",e).then(e=>{if(!e)return this.errorMessage="Orchestration '".concat(this._orchestrationId,"' not found."),void(this._autoRefresh=0);e.history&&(e.historyEvents=e.history),this.details=e,this._autoRefresh&&(this._autoRefreshToken&&clearTimeout(this._autoRefreshToken),this._autoRefreshToken=setTimeout(()=>this.loadDetails(),1e3*this._autoRefresh))},e=>{this._autoRefresh=0,this.errorMessage="Load failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}},Ft=Object(L.a)(Mt.prototype,"details",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fe}}),Object(L.a)(Mt.prototype,"orchestrationId",[W.e],Object.getOwnPropertyDescriptor(Mt.prototype,"orchestrationId"),Mt.prototype),Object(L.a)(Mt.prototype,"inProgress",[W.e],Object.getOwnPropertyDescriptor(Mt.prototype,"inProgress"),Mt.prototype),Object(L.a)(Mt.prototype,"autoRefresh",[W.e],Object.getOwnPropertyDescriptor(Mt.prototype,"autoRefresh"),Mt.prototype),Object(L.a)(Mt.prototype,"dialogOpen",[W.e],Object.getOwnPropertyDescriptor(Mt.prototype,"dialogOpen"),Mt.prototype),At=Object(L.a)(Mt.prototype,"rewindConfirmationOpen",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xt=Object(L.a)(Mt.prototype,"terminateConfirmationOpen",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zt=Object(L.a)(Mt.prototype,"purgeConfirmationOpen",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rt=Object(L.a)(Mt.prototype,"eventName",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=Object(L.a)(Mt.prototype,"eventData",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=Object(L.a)(Mt.prototype,"_inProgress",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vt=Object(L.a)(Mt.prototype,"_dialogOpen",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bt=Object(L.a)(Mt.prototype,"_autoRefresh",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mt);var Yt,Ut,qt,Jt,Kt,Gt,$t,Zt;let Qt=(Yt=class extends je{get dialogOpen(){return this._dialogOpen}set dialogOpen(e){this._dialogOpen=e,e&&(this._instancesDeleted=null,this.timeFrom=ye()().subtract(1,"days").utc(),this.timeTill=ye()().utc(),this._statuses=new Set(["Completed","Terminated"]),this.entityType="Orchestration")}get instancesDeleted(){return this._instancesDeleted}get inProgress(){return this._inProgress}get isValid(){return this._statuses.size>0&&be.isValidMoment(this.timeFrom)&&be.isValidMoment(this.timeTill)}constructor(e){super(),this._backendClient=e,Object(Se.a)(this,"timeFrom",Ut,this),Object(Se.a)(this,"timeTill",qt,this),Object(Se.a)(this,"entityType",Jt,this),Object(Se.a)(this,"_statuses",Kt,this),Object(Se.a)(this,"_dialogOpen",Gt,this),Object(Se.a)(this,"_inProgress",$t,this),Object(Se.a)(this,"_instancesDeleted",Zt,this)}purgeHistory(){this._inProgress=!0,this._backendClient.call("POST","/purge-history",{entityType:this.entityType,timeFrom:this.timeFrom.toISOString(),timeTill:this.timeTill.toISOString(),statuses:Array.from(this._statuses.values())}).then(e=>{this._instancesDeleted=e.instancesDeleted},e=>{this.errorMessage="Purge history failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}getStatusIncluded(e){return this._statuses.has(e)}setStatusIncluded(e,t){t?this._statuses.add(e):this._statuses.delete(e)}},Object(L.a)(Yt.prototype,"dialogOpen",[W.e],Object.getOwnPropertyDescriptor(Yt.prototype,"dialogOpen"),Yt.prototype),Object(L.a)(Yt.prototype,"instancesDeleted",[W.e],Object.getOwnPropertyDescriptor(Yt.prototype,"instancesDeleted"),Yt.prototype),Object(L.a)(Yt.prototype,"inProgress",[W.e],Object.getOwnPropertyDescriptor(Yt.prototype,"inProgress"),Yt.prototype),Object(L.a)(Yt.prototype,"isValid",[W.e],Object.getOwnPropertyDescriptor(Yt.prototype,"isValid"),Yt.prototype),Ut=Object(L.a)(Yt.prototype,"timeFrom",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qt=Object(L.a)(Yt.prototype,"timeTill",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt=Object(L.a)(Yt.prototype,"entityType",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Orchestration"}}),Kt=Object(L.a)(Yt.prototype,"_statuses",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),Gt=Object(L.a)(Yt.prototype,"_dialogOpen",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$t=Object(L.a)(Yt.prototype,"_inProgress",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zt=Object(L.a)(Yt.prototype,"_instancesDeleted",[W.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yt);var Xt=r(71);class er{constructor(e){this._prefix=e}setItem(e,t){localStorage.setItem("".concat(this._prefix,"::").concat(e),t)}setItems(e){var t,r=Object(Xt.a)(e);try{for(r.s();!(t=r.n()).done;){const e=t.value;null===e.value?localStorage.removeItem("".concat(this._prefix,"::").concat(e.fieldName)):localStorage.setItem("".concat(this._prefix,"::").concat(e.fieldName),e.value)}}catch(a){r.e(a)}finally{r.f()}}getItem(e){return localStorage.getItem("".concat(this._prefix,"::").concat(e))}removeItem(e){localStorage.removeItem("".concat(this._prefix,"::").concat(e))}}class tr{get isVsCode(){return!0}constructor(e){this._vsCodeApi=e,this._handlers={},this._requests={},console.log("VsCodeBackendClient ctor"),window.addEventListener("message",e=>{const t=e.data;console.log("Message: "+JSON.stringify(t));const r=this._handlers[t.id];if(r){console.log("Executing handler for messageId "+t.id+" - "+JSON.stringify(r));try{r(t.data),console.log("handler succeeded")}catch(n){console.log("Error: "+n)}return}const a=this._requests[t.id];a&&(t.data?a.resolve(t.data):a.reject(t.err),delete this._requests[t.id])})}call(e,t,r){const a=Math.random().toString();return this._vsCodeApi.postMessage({id:a,method:e,url:t,data:r}),new Promise((e,t)=>{this._requests[a]={resolve:e,reject:t}})}setPurgeHistoryHandler(e){this._handlers.purgeHistory=e,this._vsCodeApi.postMessage({method:"IAmReady"})}}class rr{constructor(e,t){this._prefix=e,this._vsCodeApi=t;const r=this._vsCodeApi.getState();rr.State=r||{}}setItem(e,t){rr.State["".concat(this._prefix,"::").concat(e)]=t,this._vsCodeApi.setState(rr.State)}setItems(e){var t,r=Object(Xt.a)(e);try{for(r.s();!(t=r.n()).done;){const e=t.value;null===e.value?delete rr.State["".concat(this._prefix,"::").concat(e.fieldName)]:rr.State["".concat(this._prefix,"::").concat(e.fieldName)]=e.value}}catch(a){r.e(a)}finally{r.f()}this._vsCodeApi.setState(rr.State)}getItem(e){return rr.State["".concat(this._prefix,"::").concat(e)]}removeItem(e){delete rr.State["".concat(this._prefix,"::").concat(e)],this._vsCodeApi.setState(rr.State)}}rr.State={};const ar=new class{constructor(){this.loginState=void 0,this.mainMenuState=void 0,this.orchestrationsState=void 0,this.orchestrationDetailsState=void 0,this.purgeHistoryDialogState=void 0;var e=void 0;try{e=acquireVsCodeApi()}catch(t){}if(e){const t=new tr(e);this.purgeHistoryDialogState=new Qt(t),this.orchestrationId?this.orchestrationDetailsState=new Ht(this.orchestrationId,t,new rr("OrchestrationDetailsState",e)):(this.orchestrationsState=new He(t,new rr("OrchestrationsState",e)),t.setPurgeHistoryHandler(()=>this.purgeHistoryDialogState.dialogOpen=!0))}else{this.loginState=new wt;const e=new gt(this.loginState.getAuthorizationHeaderAsync);this.purgeHistoryDialogState=new Qt(e),this.orchestrationId?this.orchestrationDetailsState=new Ht(this.orchestrationId,e,new er("OrchestrationDetailsState")):(this.mainMenuState=new kt(e,this.purgeHistoryDialogState),this.orchestrationsState=new He(e,new er("OrchestrationsState")))}}get orchestrationId(){if(OrchestrationIdFromVsCode)return OrchestrationIdFromVsCode;return window.location.pathname.startsWith("/orchestrations/")?window.location.pathname.substr("/orchestrations/".length):""}};n.render(a.createElement(ht,{state:ar}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");i?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):o(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):o(e)})}}()}},[[121,1,2]]]);
//# sourceMappingURL=main.1ed509ae.chunk.js.map