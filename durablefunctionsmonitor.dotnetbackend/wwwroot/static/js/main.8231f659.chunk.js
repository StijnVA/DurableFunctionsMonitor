(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){e.exports=n(167)},115:function(e,t,n){},117:function(e,t,n){e.exports=n.p+"static/media/logo.9b5d7869.svg"},118:function(e,t,n){},120:function(e,t,n){},143:function(e,t,n){},145:function(e,t,n){},147:function(e,t,n){},149:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(13),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(113),n(115);var l,s,c=n(2),u=n(15),m=n(235),p=n(233),d=n(223),h=n(205),f=n(241),g=n(222),y=(n(118),n(200)),b=n(245),E=n(168),v=n(246),O=n(243),_=n(207),C=n(208),P=n(209),S=n(210),T=n(202),w=n(211),N=(n(120),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.state;return r.createElement("div",null,r.createElement(y.a,{color:e.isLoggedInAnonymously?"secondary":"inherit",onClick:function(t){return e.menuAnchorElement=t.currentTarget}},r.createElement(T.a,null),r.createElement(m.a,{width:5}),r.createElement(b.a,{title:e.isLoggedInAnonymously?"Ensure this endpoint is not exposed to the public!":""},r.createElement(h.a,{color:e.isLoggedInAnonymously?"secondary":"inherit"},e.isLoggedInAnonymously?"Anonymous":e.userName))),!e.isLoggedInAnonymously&&r.createElement(E.a,{anchorEl:e.menuAnchorElement,keepMounted:!0,open:!!e.menuAnchorElement,onClose:function(){return e.menuAnchorElement=void 0}},r.createElement(v.a,{onClick:function(){return e.logout()}},"Login under a different name")),r.createElement(O.a,{open:!e.isLoggedIn},r.createElement(_.a,null,!e.errorMessage&&r.createElement("div",null,r.createElement(C.a,{className:"login-progress"},r.createElement(P.a,null)),r.createElement(S.a,null,"Login in progress...")),!!e.errorMessage&&r.createElement("div",null,r.createElement(C.a,{className:"login-progress"},r.createElement(w.a,{color:"secondary",fontSize:"large"})),r.createElement(S.a,{color:"secondary"},"Login failed. ",e.errorMessage)))))},t=Object(c.b)([u.a],t)}(r.Component)),I=n(213),j=n(214),k=n(215),D=n(240),F=n(221),A=n(99),M=n.n(A),L=n(7),x=n(244),R=n(212),W=n(98),B=n.n(W),V=n(97),z=n.n(V),H=(n(143),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.state;return r.createElement(x.a,{className:"message-snackbar",anchorOrigin:{vertical:"top",horizontal:"right"},open:!!e.errorMessage,autoHideDuration:6e3,onClose:this.handleClose},r.createElement(R.a,{className:"error-snackbar-content",message:r.createElement("span",null,r.createElement(z.a,{className:"error-icon"}),e.errorMessage),action:[r.createElement(I.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},r.createElement(B.a,null))]}))},t.prototype.handleClose=function(){this.props.state.errorMessage=""},Object(c.b)([L.d.bound],t.prototype,"handleClose",null),t=Object(c.b)([u.a],t)}(r.Component)),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.componentDidMount=function(){this.props.state.setWindowTitle()},t.prototype.render=function(){var e=this.props.state;return r.createElement("div",null,r.createElement(I.a,{color:"inherit",onClick:function(t){return e.menuAnchorElement=t.currentTarget}},r.createElement(M.a,null)),r.createElement(E.a,{anchorEl:e.menuAnchorElement,keepMounted:!0,open:!!e.menuAnchorElement,onClose:function(){return e.menuAnchorElement=void 0}},r.createElement(v.a,{onClick:function(){return e.showConnectionParamsDialog()}},"Manage Storage Connection Settings..."),r.createElement(v.a,{onClick:function(){return e.showPurgeHistoryDialog()}},"Purge Orchestration Instance History...")),r.createElement(O.a,{open:e.connectionParamsDialogOpen,onClose:function(){return e.connectionParamsDialogOpen=!1}},r.createElement(j.a,null,"Manage Storage Connection Setings"),r.createElement(_.a,null,e.inProgress?r.createElement(k.a,null):r.createElement(m.a,{height:4}),r.createElement(S.a,null,"The below values will be saved to host.json and local.settings.json respectively."),r.createElement(D.a,{autoFocus:!0,margin:"dense",label:"Hub Name",fullWidth:!0,disabled:e.inProgress,value:e.hubName,onChange:function(t){return e.hubName=t.target.value}}),r.createElement(D.a,{autoFocus:!0,margin:"dense",label:"Azure Storage Connection String",fullWidth:!0,InputLabelProps:{shrink:!0},placeholder:e.isConnectionStringReadonly?"[Change it via 'AzureWebJobsStorage' env variable]":"",disabled:e.inProgress||e.isConnectionStringReadonly,value:e.connectionString,onChange:function(t){return e.connectionString=t.target.value}}),r.createElement(H,{state:e})),r.createElement(F.a,null,r.createElement(y.a,{onClick:function(){return e.connectionParamsDialogOpen=!1},color:"primary"},"Cancel"),r.createElement(y.a,{onClick:function(){return e.saveConnectionParams()},disabled:!e.hubName||!e.isConnectionStringReadonly&&!e.connectionString||e.inProgress,color:"secondary"},"Save"))))},t=Object(c.b)([u.a],t)}(r.Component),J=n(224),U=n(217),Y=n(218),K=n(238),G=n(237),$=n(225),Q=n(227),Z=n(239),X=n(220),ee=n(228),te=n(229),ne=n(230),re=n(231),ae=n(249),oe=n(232),ie=n(247),le=n(62),se=n.n(le),ce=(n(145),function(){function e(){}return e.getDateTimeValue=function(e){var t=new Date(e.target.value.slice(0,16)+":00Z");try{t.toISOString()}catch(n){t=new Date}return t},e.formatDateTime=function(e){return e.toISOString().slice(0,16)},e}()),ue=(function(){}(),["Timestamp","EventType","Name","ScheduledTime","Result","Details"]),me=(function(){}(),function(){return function(){}}()),pe=["instanceId","name","createdTime","lastUpdatedTime","runtimeStatus","lastEvent","input","output","customStatus"],de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){return this.props.backendClient.isVsCode?r.createElement(g.a,{href:"#",onClick:this.onLinkClicked},this.props.orchestrationId):r.createElement(g.a,{href:"/api/monitor/orchestrations/"+this.props.orchestrationId,target:"_blank"},this.props.orchestrationId)},t.prototype.onLinkClicked=function(){this.props.backendClient.call("OpenInNewWindow",this.props.orchestrationId)},Object(c.b)([L.d.bound],t.prototype,"onLinkClicked",null),t=Object(c.b)([u.a],t)}(r.Component),he=function(){function e(){this.errorMessage=""}return Object(c.b)([L.l],e.prototype,"errorMessage",void 0),e}();!function(e){e[e.Equals=0]="Equals",e[e.StartsWith=1]="StartsWith",e[e.Contains=2]="Contains"}(l||(l={})),function(e){e[e.ShowBoth=0]="ShowBoth",e[e.OrchestrationsOnly=1]="OrchestrationsOnly",e[e.DurableEntitiesOnly=2]="DurableEntitiesOnly"}(s||(s={}));var fe=function(e){function t(t,n){var r,a=e.call(this)||this;a._backendClient=t,a._localStorage=n,a._inProgress=!1,a._orchestrations=[],a._orderByDirection="asc",a._orderBy="",a._autoRefresh=0,a._filterValue="",a._filterOperator=l.Equals,a._filteredColumn="0",a._showEntityType=s.ShowBoth,a._noMorePagesToLoad=!1,a._pageSize=50,a._oldFilterValue="";var o=a._localStorage.getItem("timeFrom");o?r=new Date(o):(r=new Date).setDate(r.getDate()-1),a._timeFrom=r,a._oldTimeFrom=r;var i=a._localStorage.getItem("timeTill");i&&(a._timeTill=new Date(i),a._oldTimeTill=a._timeTill);var c=a._localStorage.getItem("filteredColumn");c&&(a._filteredColumn=c);var u=a._localStorage.getItem("filterOperator");u&&(a._filterOperator=l[u]);var m=a._localStorage.getItem("filterValue");m&&(a._filterValue=m,a._oldFilterValue=m);var p=a._localStorage.getItem("showEntityType");p&&(a._showEntityType=s[p]);var d=a._localStorage.getItem("autoRefresh");d&&(a._autoRefresh=Number(d));var h=a._localStorage.getItem("orderBy");h&&(a._orderBy=h);var f=a._localStorage.getItem("orderByDirection");return f&&(a._orderByDirection=f),a}return Object(c.c)(t,e),Object.defineProperty(t.prototype,"inProgress",{get:function(){return this._inProgress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orchestrations",{get:function(){return this._orchestrations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoRefresh",{get:function(){return this._autoRefresh},set:function(e){this._autoRefresh=e,this._localStorage.setItem("autoRefresh",this._autoRefresh.toString()),this.loadOrchestrations(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeFrom",{get:function(){return this._timeFrom},set:function(e){this._timeFrom=e,this.resetOrderBy()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeTill",{get:function(){return this._timeTill?this._timeTill:new Date},set:function(e){this._timeTill=e,this.resetOrderBy()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeTillEnabled",{get:function(){return!!this._timeTill},set:function(e){this._timeTill=e?new Date:void 0,e||(this.resetOrderBy(),this.reloadOrchestrations())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderByDirection",{get:function(){return this._orderByDirection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderBy",{get:function(){return this._orderBy},set:function(e){this._orderBy!==e?this._orderBy=e:this._orderByDirection="desc"===this._orderByDirection?"asc":"desc",this.reloadOrchestrations()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterValue",{get:function(){return this._filterValue},set:function(e){this._filterValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterOperator",{get:function(){return this._filterOperator},set:function(e){this._filterOperator=e,this._filterValue&&"0"!==this._filteredColumn&&this.reloadOrchestrations()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filteredColumn",{get:function(){return this._filteredColumn},set:function(e){this._filteredColumn=e,this._filterValue&&("0"===this._filteredColumn&&(this._filterValue=""),this.reloadOrchestrations())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showEntityType",{get:function(){return s[this._showEntityType]},set:function(e){this._showEntityType=s[e],this.reloadOrchestrations()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showLastEventColumn",{get:function(){return"lastEvent"===this._filteredColumn&&!!this._oldFilterValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backendClient",{get:function(){return this._backendClient},enumerable:!0,configurable:!0}),t.prototype.applyTimeFrom=function(){this._oldTimeFrom!==this._timeFrom&&this.reloadOrchestrations()},t.prototype.applyTimeTill=function(){this._oldTimeTill!==this._timeTill&&this.reloadOrchestrations()},t.prototype.applyFilterValue=function(){this._oldFilterValue!==this._filterValue&&this.reloadOrchestrations()},t.prototype.reloadOrchestrations=function(){this._orchestrations=[],this._noMorePagesToLoad=!1,this._localStorage.setItems([{fieldName:"timeFrom",value:this._timeFrom.toISOString()},{fieldName:"timeTill",value:this._timeTill?this._timeTill.toISOString():null},{fieldName:"timeFrom",value:this._timeFrom.toISOString()},{fieldName:"filteredColumn",value:this._filteredColumn},{fieldName:"filterOperator",value:l[this._filterOperator]},{fieldName:"filterValue",value:this._filterValue?this._filterValue:null},{fieldName:"showEntityType",value:s[this._showEntityType]},{fieldName:"orderBy",value:this._orderBy},{fieldName:"orderByDirection",value:this._orderByDirection}]),this.loadOrchestrations(),this._oldFilterValue=this._filterValue,this._oldTimeFrom=this._timeFrom,this._oldTimeTill=this._timeTill},t.prototype.loadOrchestrations=function(e){var t=this;if(void 0===e&&(e=!1),!(this.inProgress||this._noMorePagesToLoad&&!this._autoRefresh)){this._inProgress=!0;var n=e?0:this._orchestrations.length,r=this._timeTill?this._timeTill:new Date,a="&$filter=createdTime ge '"+this._timeFrom.toISOString()+"' and createdTime le '"+r.toISOString()+"'";if(this._showEntityType===s.OrchestrationsOnly?a+=" and entityType eq 'Orchestration'":this._showEntityType===s.DurableEntitiesOnly&&(a+=" and entityType eq 'DurableEntity'"),this._filterValue&&"0"!==this._filteredColumn)switch(a+=" and ",this._filterOperator){case l.Equals:a+=this._filteredColumn+" eq '"+this._filterValue+"'";break;case l.StartsWith:a+="startswith("+this._filteredColumn+", '"+this._filterValue+"')";break;case l.Contains:a+="contains("+this._filteredColumn+", '"+this._filterValue+"')"}var o=this._orderBy?"&$orderby="+this._orderBy+" "+this.orderByDirection:"",i="/orchestrations?$top="+this._pageSize+"&$skip="+n+a+o;this._backendClient.call("GET",i).then(function(n){var r;n.length?e?t._orchestrations=n:(r=t._orchestrations).push.apply(r,n):t._noMorePagesToLoad=!0,t._autoRefresh&&(t._autoRefreshToken&&clearTimeout(t._autoRefreshToken),t._autoRefreshToken=setTimeout(function(){return t.loadOrchestrations(!0)},1e3*t._autoRefresh))},function(e){t._autoRefresh=0,t.errorMessage="Load failed: "+e.message+"."+(e.response?e.response.data:"")+" "}).finally(function(){t._inProgress=!1})}},t.prototype.resetOrderBy=function(){this._orderBy="",this._orderByDirection="asc"},Object(c.b)([L.e],t.prototype,"inProgress",null),Object(c.b)([L.e],t.prototype,"orchestrations",null),Object(c.b)([L.e],t.prototype,"autoRefresh",null),Object(c.b)([L.e],t.prototype,"timeFrom",null),Object(c.b)([L.e],t.prototype,"timeTill",null),Object(c.b)([L.e],t.prototype,"timeTillEnabled",null),Object(c.b)([L.e],t.prototype,"orderByDirection",null),Object(c.b)([L.e],t.prototype,"orderBy",null),Object(c.b)([L.e],t.prototype,"filterValue",null),Object(c.b)([L.e],t.prototype,"filterOperator",null),Object(c.b)([L.e],t.prototype,"filteredColumn",null),Object(c.b)([L.e],t.prototype,"showEntityType",null),Object(c.b)([L.e],t.prototype,"showLastEventColumn",null),Object(c.b)([L.l],t.prototype,"_inProgress",void 0),Object(c.b)([L.l],t.prototype,"_orchestrations",void 0),Object(c.b)([L.l],t.prototype,"_orderByDirection",void 0),Object(c.b)([L.l],t.prototype,"_orderBy",void 0),Object(c.b)([L.l],t.prototype,"_autoRefresh",void 0),Object(c.b)([L.l],t.prototype,"_timeFrom",void 0),Object(c.b)([L.l],t.prototype,"_timeTill",void 0),Object(c.b)([L.l],t.prototype,"_filterValue",void 0),Object(c.b)([L.l],t.prototype,"_filterOperator",void 0),Object(c.b)([L.l],t.prototype,"_filteredColumn",void 0),Object(c.b)([L.l],t.prototype,"_showEntityType",void 0),t}(he),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.state.loadOrchestrations(),document.addEventListener("scroll",function(t){var n=t.target.scrollingElement;if(n){n.scrollHeight-window.innerHeight-n.scrollTop<100&&e.props.state.loadOrchestrations()}})},t.prototype.render=function(){var e=this.props.state;return r.createElement("div",null,e.inProgress?r.createElement(k.a,null):r.createElement(m.a,{height:4}),r.createElement(d.a,{variant:"dense",className:"top-toolbar"},r.createElement(J.a,{container:!0,className:"toolbar-grid1"},r.createElement(J.a,{item:!0,xs:12},r.createElement(D.a,{className:"from-input",style:{marginLeft:10},label:"From \xa0\xa0 (UTC)",type:"datetime-local",InputLabelProps:{shrink:!0},disabled:e.inProgress,value:ce.formatDateTime(e.timeFrom),onChange:function(t){e.timeFrom=ce.getDateTimeValue(t)},onBlur:function(){return e.applyTimeFrom()},onKeyPress:this.handleKeyPress})),r.createElement(J.a,{item:!0,xs:12,className:"toolbar-grid1-item2"},r.createElement(U.a,null,r.createElement(Y.a,{className:"till-label",htmlFor:"till-checkbox",shrink:!0},"Till"),r.createElement(K.a,{id:"till-checkbox",className:"till-checkbox",disabled:e.inProgress,checked:e.timeTillEnabled,onChange:function(t){return e.timeTillEnabled=t.target.checked}})),r.createElement(D.a,{className:"till-input",label:"(UTC)",placeholder:"[Now]",InputLabelProps:{shrink:!0},type:e.timeTillEnabled?"datetime-local":"text",disabled:!e.timeTillEnabled||e.inProgress,value:e.timeTillEnabled?ce.formatDateTime(e.timeTill):"",onChange:function(t){e.timeTill=ce.getDateTimeValue(t)},onBlur:function(){return e.applyTimeTill()},onKeyPress:this.handleKeyPress}))),r.createElement(J.a,{container:!0,className:"toolbar-grid2"},r.createElement(J.a,{item:!0,xs:12},r.createElement(U.a,null,r.createElement(Y.a,{htmlFor:"filtered-column-select"},"Filtered Column"),r.createElement(G.a,{className:"toolbar-select filtered-column-input",disabled:e.inProgress,value:e.filteredColumn,onChange:function(t){return e.filteredColumn=t.target.value},inputProps:{id:"filtered-column-select"}},r.createElement(v.a,{value:"0"},"[Not Selected]"),pe.map(function(e){return r.createElement(v.a,{key:e,value:e},e)}))),r.createElement(U.a,{className:"toolbar-grid2-item1-select"},r.createElement(Y.a,{htmlFor:"filter-operator-select"},"Filter Operator"),r.createElement(G.a,{className:"toolbar-select",disabled:e.inProgress,value:e.filterOperator,onChange:function(t){return e.filterOperator=t.target.value},inputProps:{id:"filter-operator-select"}},r.createElement(v.a,{value:0},"Equals"),r.createElement(v.a,{value:1},"Starts With"),r.createElement(v.a,{value:2},"Contains")))),r.createElement(J.a,{item:!0,xs:12,className:"toolbar-grid2-item2"},r.createElement(D.a,{className:"filter-value-input",label:"Filter Value",InputLabelProps:{shrink:!0},placeholder:"[some text or 'null']",disabled:"0"===e.filteredColumn||e.inProgress,value:e.filterValue,onChange:function(t){return e.filterValue=t.target.value},onBlur:function(){return e.applyFilterValue()},onKeyPress:this.handleKeyPress}))),r.createElement($.a,{value:e.showEntityType,onChange:function(t){return e.showEntityType=t.target.value}},r.createElement(Q.a,{className:"entity-type-radio",disabled:e.inProgress,value:s[s.ShowBoth],control:r.createElement(Z.a,null),label:r.createElement(h.a,{variant:"subtitle2"},"Show both")}),r.createElement(Q.a,{className:"entity-type-radio",disabled:e.inProgress,value:s[s.OrchestrationsOnly],control:r.createElement(Z.a,null),label:r.createElement(h.a,{variant:"subtitle2"},"Orchestrations only")}),r.createElement(Q.a,{className:"entity-type-radio",disabled:e.inProgress,value:s[s.DurableEntitiesOnly],control:r.createElement(Z.a,null),label:r.createElement(h.a,{variant:"subtitle2"},"Durable Entities only")})),r.createElement(h.a,{style:{flex:1}}),r.createElement(J.a,{container:!0,className:"toolbar-grid3"},r.createElement(J.a,{item:!0,xs:12},r.createElement(U.a,{className:"form-control-float-right"},r.createElement(Y.a,{htmlFor:"auto-refresh-select"},"Auto-refresh"),r.createElement(G.a,{className:"toolbar-select",inputProps:{id:"auto-refresh-select"},value:e.autoRefresh,onChange:function(t){return e.autoRefresh=t.target.value}},r.createElement(v.a,{value:0},"Never"),r.createElement(v.a,{value:1},"Every 1 sec."),r.createElement(v.a,{value:5},"Every 5 sec."),r.createElement(v.a,{value:10},"Every 10 sec.")))),r.createElement(J.a,{item:!0,xs:12,className:"toolbar-grid3-item2"},r.createElement(y.a,{className:"refresh-button form-control-float-right",variant:"outlined",color:"default",size:"large",onClick:function(){return e.reloadOrchestrations()}},r.createElement(se.a,null))))),r.createElement(X.a,{className:"items-count-label"},e.orchestrations.length?e.orchestrations.length+" items shown":""),e.orchestrations.length?this.renderTable(e):this.renderEmptyTable(),e.inProgress&&e.orchestrations.length?r.createElement(k.a,null):r.createElement(m.a,{height:4}),r.createElement(d.a,{variant:"dense"}),r.createElement(H,{state:this.props.state}))},t.prototype.renderEmptyTable=function(){return r.createElement(h.a,{variant:"h5",className:"empty-table-placeholder"},"This list is empty")},t.prototype.renderTable=function(e){return r.createElement(ee.a,{size:"small"},r.createElement(te.a,null,r.createElement(ne.a,null,pe.filter(function(t){return!!e.showLastEventColumn||"lastEvent"!==t}).map(function(t){return r.createElement(re.a,{key:t},r.createElement(ae.a,{active:e.orderBy===t,direction:e.orderByDirection,onClick:function(){return e.orderBy=t}},t))}))),r.createElement(oe.a,null,e.orchestrations.map(function(t){var n={verticalAlign:"top"};return r.createElement(ne.a,{key:t.instanceId,className:"runtime-status-"+t.runtimeStatus.toString().toLowerCase()},r.createElement(re.a,{className:"instance-id-cell",style:n},r.createElement(de,{orchestrationId:t.instanceId,backendClient:e.backendClient})),r.createElement(re.a,{className:"name-cell",style:n},t.name),r.createElement(re.a,{className:"datetime-cell",style:n},t.createdTime),r.createElement(re.a,{className:"datetime-cell",style:n},t.lastUpdatedTime),r.createElement(re.a,{style:n},t.runtimeStatus),e.showLastEventColumn&&r.createElement(re.a,{style:n},t.lastEvent),r.createElement(re.a,{className:"long-text-cell",style:n},r.createElement(ie.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.input)})),r.createElement(re.a,{className:"output-cell",style:n},r.createElement(ie.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.output)})),r.createElement(re.a,{className:"output-cell",style:n},r.createElement(ie.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.customStatus)})))})))},t.prototype.handleKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),this.props.state.reloadOrchestrations())},Object(c.b)([L.d.bound],t.prototype,"handleKeyPress",null),t=Object(c.b)([u.a],t)}(r.Component),ye=(n(147),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.state;return r.createElement(r.Fragment,null,this.renderDialogs(e),r.createElement(y.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return e.purgeConfirmationOpen=!0}},"Purge"))},t.prototype.renderDialogs=function(e){return r.createElement(r.Fragment,null,r.createElement(O.a,{open:e.purgeConfirmationOpen,onClose:function(){return e.purgeConfirmationOpen=!1}},r.createElement(j.a,null,"Confirm Purge"),r.createElement(_.a,null,r.createElement(S.a,null,"You're about to purge entity '",e.orchestrationId,"'. This operation drops entity state from the underlying storage and cannot be undone. Are you sure?")),r.createElement(F.a,null,r.createElement(y.a,{onClick:function(){return e.purgeConfirmationOpen=!1},color:"primary",autoFocus:!0},"Cancel"),r.createElement(y.a,{onClick:function(){return e.purge()},color:"secondary"},"Yes, purge"))))},t=Object(c.b)([u.a],t)}(r.Component)),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.details;return r.createElement(r.Fragment,null,r.createElement(J.a,{container:!0,className:"grid-container"},r.createElement(J.a,{item:!0,xs:12,sm:12,md:3,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"entityId.name",value:e.entityId.name,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement(J.a,{item:!0,xs:12,sm:6,md:3,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"entityId.key",value:e.entityId.key,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement(J.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"createdTime",value:e.createdTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement(J.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"lastUpdatedTime",value:e.lastUpdatedTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement(J.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"runtimeStatus",value:e.runtimeStatus,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,className:e.runtimeStatus?"runtime-status-"+e.runtimeStatus.toLowerCase():""})),r.createElement(J.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"input",value:JSON.stringify(e.input),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:5})),r.createElement(J.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"customStatus",value:JSON.stringify(e.customStatus),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:5}))))},t=Object(c.b)([u.a],t)}(r.Component),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.state;return r.createElement(r.Fragment,null,this.renderDialogs(e),r.createElement(y.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return e.rewindConfirmationOpen=!0}},"Rewind"),r.createElement(m.a,{width:20}),r.createElement(y.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return e.terminateConfirmationOpen=!0}},"Terminate"),r.createElement(m.a,{width:20}),r.createElement(y.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return e.dialogOpen=!0}},"Raise Event"),r.createElement(m.a,{width:20}),r.createElement(y.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return e.purgeConfirmationOpen=!0}},"Purge"))},t.prototype.renderDialogs=function(e){return r.createElement(r.Fragment,null,r.createElement(O.a,{open:e.rewindConfirmationOpen,onClose:function(){return e.rewindConfirmationOpen=!1}},r.createElement(j.a,null,"Confirm Rewind"),r.createElement(_.a,null,r.createElement(S.a,null,"You're about to rewind orchestration '",e.orchestrationId,"'. Are you sure?")),r.createElement(F.a,null,r.createElement(y.a,{onClick:function(){return e.rewindConfirmationOpen=!1},color:"primary",autoFocus:!0},"Cancel"),r.createElement(y.a,{onClick:function(){return e.rewind()},color:"secondary"},"Yes, rewind"))),r.createElement(O.a,{open:e.terminateConfirmationOpen,onClose:function(){return e.terminateConfirmationOpen=!1}},r.createElement(j.a,null,"Confirm Terminate"),r.createElement(_.a,null,r.createElement(S.a,null,"You're about to terminate orchestration '",e.orchestrationId,"'. This operation cannot be undone. Are you sure?")),r.createElement(F.a,null,r.createElement(y.a,{onClick:function(){return e.terminateConfirmationOpen=!1},color:"primary",autoFocus:!0},"Cancel"),r.createElement(y.a,{onClick:function(){return e.terminate()},color:"secondary"},"Yes, terminate"))),r.createElement(O.a,{open:e.dialogOpen,onClose:function(){return e.dialogOpen=!1}},r.createElement(j.a,null,"Raise Event"),r.createElement(_.a,null,r.createElement(S.a,null,"Provide event name and some additional data."),r.createElement(D.a,{autoFocus:!0,margin:"dense",label:"Event Name",fullWidth:!0,value:e.eventName,onChange:function(t){return e.eventName=t.target.value}}),r.createElement(D.a,{margin:"dense",label:"Event Data (JSON)",fullWidth:!0,multiline:!0,rows:7,value:e.eventData,onChange:function(t){return e.eventData=t.target.value}})),r.createElement(F.a,null,r.createElement(y.a,{onClick:function(){return e.dialogOpen=!1},color:"primary"},"Cancel"),r.createElement(y.a,{onClick:function(){return e.raiseEvent()},disabled:!e.eventName,color:"secondary"},"Raise"))),r.createElement(O.a,{open:e.purgeConfirmationOpen,onClose:function(){return e.purgeConfirmationOpen=!1}},r.createElement(j.a,null,"Confirm Purge"),r.createElement(_.a,null,r.createElement(S.a,null,"You're about to purge orchestration '",e.orchestrationId,"'. This operation drops orchestration state from the underlying storage and cannot be undone. Are you sure?")),r.createElement(F.a,null,r.createElement(y.a,{onClick:function(){return e.purgeConfirmationOpen=!1},color:"primary",autoFocus:!0},"Cancel"),r.createElement(y.a,{onClick:function(){return e.purge()},color:"secondary"},"Yes, purge"))))},t=Object(c.b)([u.a],t)}(r.Component),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.details;return r.createElement(r.Fragment,null,r.createElement(J.a,{container:!0,className:"grid-container"},r.createElement(J.a,{item:!0,xs:12,sm:12,md:3,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"name",value:e.name,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement(J.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"createdTime",value:e.createdTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement(J.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"lastUpdatedTime",value:e.lastUpdatedTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement(J.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"runtimeStatus",value:e.runtimeStatus,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,className:e.runtimeStatus?"runtime-status-"+e.runtimeStatus.toLowerCase():""})),r.createElement(J.a,{item:!0,xs:12,sm:6,md:3,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"customStatus",value:JSON.stringify(e.customStatus),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement(J.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"input",value:JSON.stringify(e.input),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:5})),r.createElement(J.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},r.createElement(D.a,{label:"output",value:JSON.stringify(e.output),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:5}))),r.createElement(X.a,{className:"history-events-count-label"},"historyEvents: ",e.historyEvents?e.historyEvents.length:0," items"),this.renderTable(e.historyEvents))},t.prototype.renderEmptyTable=function(){return r.createElement(h.a,{variant:"h5",className:"empty-table-placeholder"},"This list is empty")},t.prototype.renderTable=function(e){return e&&e.length?r.createElement(ee.a,{size:"small"},r.createElement(te.a,null,r.createElement(ne.a,null,ue.map(function(e){return r.createElement(re.a,{key:e},e)}))),r.createElement(oe.a,null,e.map(function(e,t){var n={verticalAlign:"top"};return r.createElement(ne.a,{key:t},r.createElement(re.a,{style:n},e.Timestamp),r.createElement(re.a,{style:n},e.EventType),r.createElement(re.a,{className:"name-cell",style:n},e.Name?e.Name:e.FunctionName),r.createElement(re.a,{style:n},e.ScheduledTime),r.createElement(re.a,{className:"long-text-cell",style:n},r.createElement(ie.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(e.Result)})),r.createElement(re.a,{className:"long-text-cell",style:n},r.createElement(ie.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:e.Details})))}))):this.renderEmptyTable()},t=Object(c.b)([u.a],t)}(r.Component),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.componentDidMount=function(){this.props.state.loadDetails()},t.prototype.render=function(){var e=this.props.state;return r.createElement("div",null,e.inProgress?r.createElement(k.a,null):r.createElement(m.a,{height:4}),r.createElement(d.a,{variant:"dense",className:"top-toolbar"},"Orchestration"===e.details.entityType&&r.createElement(Ee,{state:e}),"DurableEntity"===e.details.entityType&&r.createElement(ye,{state:e}),r.createElement(m.a,{width:20}),r.createElement(h.a,{style:{flex:1}}),r.createElement(U.a,null,r.createElement(Y.a,{htmlFor:"auto-refresh-select"},"Auto-refresh"),r.createElement(G.a,{className:"toolbar-select",value:e.autoRefresh,onChange:function(t){return e.autoRefresh=t.target.value},inputProps:{id:"auto-refresh-select"}},r.createElement(v.a,{value:0},"Never"),r.createElement(v.a,{value:1},"Every 1 sec."),r.createElement(v.a,{value:5},"Every 5 sec."),r.createElement(v.a,{value:10},"Every 10 sec."))),r.createElement(m.a,{width:20}),r.createElement(y.a,{className:"refresh-button",variant:"outlined",color:"default",size:"large",onClick:function(){return e.loadDetails()}},r.createElement(se.a,null))),"Orchestration"===e.details.entityType&&r.createElement(ve,{details:e.details}),"DurableEntity"===e.details.entityType&&r.createElement(be,{details:e.details}),e.inProgress?r.createElement(k.a,null):r.createElement(m.a,{height:4}),r.createElement(m.a,{height:10}),r.createElement(H,{state:this.props.state}))},t=Object(c.b)([u.a],t)}(r.Component),_e=n(219),Ce=n(226),Pe=(n(149),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.state;return r.createElement(O.a,{open:e.dialogOpen,onClose:function(){e.inProgress||(e.dialogOpen=!1)}},r.createElement(j.a,null,"Purge Orchestration Instance History"),null===e.instancesDeleted&&r.createElement("div",null,r.createElement(_.a,null,e.inProgress?r.createElement(k.a,null):r.createElement(m.a,{height:4}),r.createElement(S.a,null,"WARNING: this operation drops orchestration states from the underlying storage and cannot be undone."),r.createElement(D.a,{className:"purge-history-from-input",label:"From (UTC)",type:"datetime-local",InputLabelProps:{shrink:!0},disabled:e.inProgress,value:ce.formatDateTime(e.timeFrom),onChange:function(t){e.timeFrom=ce.getDateTimeValue(t)}}),r.createElement(D.a,{className:"purge-history-till-input",label:"Till (UTC)",type:"datetime-local",InputLabelProps:{shrink:!0},disabled:e.inProgress,value:ce.formatDateTime(e.timeTill),onChange:function(t){e.timeTill=ce.getDateTimeValue(t)}}),r.createElement(U.a,{className:"purge-history-statuses",disabled:e.inProgress},r.createElement(_e.a,null,"Remove orchestrations with the following status:"),r.createElement(Ce.a,{row:!0},r.createElement(Se,{state:e,runtimeStatus:"Completed"}),r.createElement(Se,{state:e,runtimeStatus:"Failed"}),r.createElement(Se,{state:e,runtimeStatus:"Terminated"})),r.createElement(_e.a,null,"(Only these three are supported by the API, sorry)")),r.createElement(H,{state:e})),r.createElement(F.a,null,r.createElement(y.a,{onClick:function(){return e.dialogOpen=!1},disabled:e.inProgress,color:"primary"},"Cancel"),r.createElement(y.a,{onClick:function(){return e.purgeHistory()},disabled:!e.isValid||e.inProgress,color:"secondary"},"Purge"))),null!==e.instancesDeleted&&r.createElement("div",null,r.createElement(_.a,null,r.createElement(S.a,{className:"success-message"},e.instancesDeleted," instances were deleted.")),r.createElement(F.a,null,r.createElement(y.a,{onClick:function(){return e.dialogOpen=!1},color:"primary"},"Close"))))},t=Object(c.b)([u.a],t)}(r.Component)),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.state,t=this.props.runtimeStatus;return r.createElement(Q.a,{control:r.createElement(K.a,{checked:e.getStatusIncluded(t),onChange:function(n){return e.setStatusIncluded(t,n.target.checked)}}),label:t})},t=Object(c.b)([u.a],t)}(r.Component),Te=n(117),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.c)(t,e),t.prototype.render=function(){var e=this.props.state;return r.createElement("div",null,!e.loginState&&r.createElement(m.a,{height:20}),!!e.loginState&&r.createElement(p.a,{position:"static",color:"default",className:"app-bar"},r.createElement(d.a,null,e.loginState.isLoggedIn&&!!e.mainMenuState&&r.createElement(q,{state:e.mainMenuState}),r.createElement("img",{src:Te,width:"30px"}),r.createElement(m.a,{width:5}),r.createElement(h.a,{variant:"h6",color:"inherit",className:"title-typography"},"Durable Functions Monitor"),r.createElement(f.a,{color:"inherit"},r.createElement(g.a,{color:"inherit",href:"/api/monitor"},"/ instances"),!!e.orchestrationDetailsState&&r.createElement(h.a,{color:"inherit"},e.orchestrationDetailsState.orchestrationId)),r.createElement(h.a,{style:{flex:1}}),r.createElement(N,{state:e.loginState}))),!!e.orchestrationsState&&(!e.loginState||e.loginState.isLoggedIn)&&r.createElement(ge,{state:e.orchestrationsState}),!!e.orchestrationDetailsState&&(!e.loginState||e.loginState.isLoggedIn)&&r.createElement(Oe,{state:e.orchestrationDetailsState}),r.createElement(Pe,{state:e.purgeHistoryDialogState}))},t=Object(c.b)([u.a],t)}(r.Component),Ne=n(64),Ie=n.n(Ne),je=function(){function e(e){this._getAuthorizationHeaderAsync=e}return Object.defineProperty(e.prototype,"isVsCode",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.call=function(e,t,n){var r=this;return new Promise(function(a,o){r._getAuthorizationHeaderAsync().then(function(r){Ie.a.request({url:"/api"+t,method:e,data:n,headers:r}).then(function(e){a(e.data)},o)})})},e}(),ke=n(100),De=function(e){function t(){var t=e.call(this)||this;return t._isLoggedIn=!1,t.login(),t}return Object(c.c)(t,e),Object.defineProperty(t.prototype,"isLoggedIn",{get:function(){return this._isLoggedIn},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoggedInAnonymously",{get:function(){return!this._userName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userName",{get:function(){return this._userName},enumerable:!0,configurable:!0}),t.prototype.login=function(){var e=this;Ie.a.get("/api/easyauth-config").then(this.loginWithEasyAuthConfig,function(t){e.errorMessage=t.message+"."+(t.response?t.response.data:"")})},t.prototype.logout=function(){this.menuAnchorElement=void 0,this._aadApp.logout()},t.prototype.getAuthorizationHeaderAsync=function(){var e=this;return this._aadApp?new Promise(function(t,n){var r={scopes:[e._aadApp.getCurrentConfiguration().auth.clientId]};e._aadApp.acquireTokenSilent(r).then(function(e){var n=e.accessToken;n||(console.log("DFM: accessToken is null, so using idToken.rawIdToken instead"),n=e.idToken.rawIdToken),t({Authorization:"Bearer "+n})},function(t){console.log("DFM: acquireTokenSilent() failed ("+t+"), so calling acquireTokenRedirect()..."),e._aadApp.acquireTokenRedirect(r)})}):new Promise(function(e,t){return e()})},t.prototype.loginWithEasyAuthConfig=function(e){var t=e.data;if(t.clientId){this._aadApp=new ke.a({auth:{clientId:t.clientId,authority:t.authority}}),this._aadApp.handleRedirectCallback(function(){},this.handleRedirectCallbackFailed);var n=this._aadApp.getAccount();n?(this._userName=n.userName,this._isLoggedIn=!0):(console.log("DFM: redirecting user to AAD for login..."),this._aadApp.loginRedirect())}else this._isLoggedIn=!0},t.prototype.handleRedirectCallbackFailed=function(e,t){this.errorMessage="Failed to handle login redirect. name: "+e.name+", message: "+e.message+", errorCode: "+e.errorCode+", errorMessage: "+e.errorMessage+", accountState: "+t},Object(c.b)([L.e],t.prototype,"isLoggedIn",null),Object(c.b)([L.e],t.prototype,"isLoggedInAnonymously",null),Object(c.b)([L.e],t.prototype,"userName",null),Object(c.b)([L.l],t.prototype,"menuAnchorElement",void 0),Object(c.b)([L.d.bound],t.prototype,"getAuthorizationHeaderAsync",null),Object(c.b)([L.l],t.prototype,"_isLoggedIn",void 0),Object(c.b)([L.l],t.prototype,"_userName",void 0),Object(c.b)([L.d.bound],t.prototype,"loginWithEasyAuthConfig",null),Object(c.b)([L.d.bound],t.prototype,"handleRedirectCallbackFailed",null),t}(he),Fe=function(e){function t(t,n){var r=e.call(this)||this;return r._backendClient=t,r._purgeHistoryDialogState=n,r.connectionParamsDialogOpen=!1,r._inProgress=!1,r}return Object(c.c)(t,e),Object.defineProperty(t.prototype,"inProgress",{get:function(){return this._inProgress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isConnectionStringReadonly",{get:function(){return!this._oldConnectionString},enumerable:!0,configurable:!0}),t.prototype.showConnectionParamsDialog=function(){var e=this;this.menuAnchorElement=void 0,this.connectionParamsDialogOpen=!0,this._inProgress=!0,this._backendClient.call("GET","/manage-connection").then(function(t){e.connectionString=t.connectionString,e._oldConnectionString=e.connectionString,e.hubName=t.hubName},function(t){e.errorMessage="Load failed: "+t.message+"."+(t.response?t.response.data:"")+" "}).finally(function(){e._inProgress=!1})},t.prototype.saveConnectionParams=function(){var e=this;this._inProgress=!0,this._backendClient.call("PUT","/manage-connection",{connectionString:this.connectionString,hubName:this.hubName}).then(function(){e.connectionParamsDialogOpen=!1,e._oldConnectionString!==e.connectionString?alert("You've changed the Connection String, and the new value cannot currently be picked up automatically. Please, restart the Function Host."):location.reload()},function(t){e.errorMessage="Save failed: "+t.message+"."+(t.response?t.response.data:"")+" "}).finally(function(){e._inProgress=!1})},t.prototype.showPurgeHistoryDialog=function(){this.menuAnchorElement=void 0,this._purgeHistoryDialogState.dialogOpen=!0},t.prototype.setWindowTitle=function(){this._backendClient.call("GET","/about").then(function(e){document.title="Durable Functions Monitor ("+e.accountName+"/"+e.hubName+") v"+e.version})},Object(c.b)([L.l],t.prototype,"menuAnchorElement",void 0),Object(c.b)([L.l],t.prototype,"hubName",void 0),Object(c.b)([L.l],t.prototype,"connectionString",void 0),Object(c.b)([L.l],t.prototype,"connectionParamsDialogOpen",void 0),Object(c.b)([L.e],t.prototype,"inProgress",null),Object(c.b)([L.e],t.prototype,"isConnectionStringReadonly",null),Object(c.b)([L.l],t.prototype,"_inProgress",void 0),Object(c.b)([L.l],t.prototype,"_oldConnectionString",void 0),t}(he),Ae=function(e){function t(t,n,r){var a=e.call(this)||this;a._orchestrationId=t,a._backendClient=n,a._localStorage=r,a.details=new me,a.rewindConfirmationOpen=!1,a.terminateConfirmationOpen=!1,a.purgeConfirmationOpen=!1,a._inProgress=!1,a._dialogOpen=!1,a._autoRefresh=0;var o=a._localStorage.getItem("autoRefresh");return o&&(a._autoRefresh=Number(o)),a}return Object(c.c)(t,e),Object.defineProperty(t.prototype,"orchestrationId",{get:function(){return this._orchestrationId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inProgress",{get:function(){return this._inProgress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoRefresh",{get:function(){return this._autoRefresh},set:function(e){this._autoRefresh=e,this._localStorage.setItem("autoRefresh",this._autoRefresh.toString()),this.loadDetails()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogOpen",{get:function(){return this._dialogOpen},set:function(e){this._dialogOpen=e,this.eventName="",this.eventData=""},enumerable:!0,configurable:!0}),t.prototype.rewind=function(){var e=this;this.rewindConfirmationOpen=!1;var t="/orchestrations('"+this._orchestrationId+"')/rewind";this._inProgress=!0,this._backendClient.call("POST",t).then(function(){e._inProgress=!1,e.loadDetails()},function(t){e._inProgress=!1,e.errorMessage="Failed to rewind: "+t.message+"."+(t.response?t.response.data:"")+" "})},t.prototype.terminate=function(){var e=this;this.terminateConfirmationOpen=!1;var t="/orchestrations('"+this._orchestrationId+"')/terminate";this._inProgress=!0,this._backendClient.call("POST",t).then(function(){e._inProgress=!1,e.loadDetails()},function(t){e._inProgress=!1,e.errorMessage="Failed to terminate: "+t.message+"."+(t.response?t.response.data:"")+" "})},t.prototype.purge=function(){var e=this;this.purgeConfirmationOpen=!1;var t="/orchestrations('"+this._orchestrationId+"')/purge";this._inProgress=!0,this._backendClient.call("POST",t).then(function(){e._inProgress=!1,e.details=new me},function(t){e._inProgress=!1,e.errorMessage="Failed to purge: "+t.message+"."+(t.response?t.response.data:"")+" "})},t.prototype.raiseEvent=function(){var e=this,t="/orchestrations('"+this._orchestrationId+"')/raise-event",n={name:this.eventName,data:null};try{n.data=JSON.parse(this.eventData)}catch(r){return void(this.errorMessage="Event Data failed to parse: "+r.message)}finally{this.dialogOpen=!1}this._inProgress=!0,this._backendClient.call("POST",t,n).then(function(){e._inProgress=!1,e.loadDetails()},function(t){e._inProgress=!1,e.errorMessage="Failed to raise an event: "+t.message+"."+(t.response?t.response.data:"")+" "})},t.prototype.loadDetails=function(){var e=this;if(!this.inProgress){this._inProgress=!0;var t="/orchestrations('"+this._orchestrationId+"')";this._backendClient.call("GET",t).then(function(t){if(!t)return e.errorMessage="Orchestration '"+e._orchestrationId+"' not found.",void(e._autoRefresh=0);t.history&&(t.historyEvents=t.history),e.details=t,e._autoRefresh&&(e._autoRefreshToken&&clearTimeout(e._autoRefreshToken),e._autoRefreshToken=setTimeout(function(){return e.loadDetails()},1e3*e._autoRefresh))},function(t){e._autoRefresh=0,e.errorMessage="Load failed: "+t.message+"."+(t.response?t.response.data:"")+" "}).finally(function(){e._inProgress=!1})}},Object(c.b)([L.l],t.prototype,"details",void 0),Object(c.b)([L.e],t.prototype,"orchestrationId",null),Object(c.b)([L.e],t.prototype,"inProgress",null),Object(c.b)([L.e],t.prototype,"autoRefresh",null),Object(c.b)([L.e],t.prototype,"dialogOpen",null),Object(c.b)([L.l],t.prototype,"rewindConfirmationOpen",void 0),Object(c.b)([L.l],t.prototype,"terminateConfirmationOpen",void 0),Object(c.b)([L.l],t.prototype,"purgeConfirmationOpen",void 0),Object(c.b)([L.l],t.prototype,"eventName",void 0),Object(c.b)([L.l],t.prototype,"eventData",void 0),Object(c.b)([L.l],t.prototype,"_inProgress",void 0),Object(c.b)([L.l],t.prototype,"_dialogOpen",void 0),Object(c.b)([L.l],t.prototype,"_autoRefresh",void 0),t}(he),Me=function(e){function t(t){var n=e.call(this)||this;return n._backendClient=t,n.timeFrom=new Date,n.timeTill=new Date,n._statuses=new Set,n._dialogOpen=!1,n._inProgress=!1,n._instancesDeleted=null,n}return Object(c.c)(t,e),Object.defineProperty(t.prototype,"dialogOpen",{get:function(){return this._dialogOpen},set:function(e){if(this._dialogOpen=e,e){this._instancesDeleted=null;var t=new Date;t.setDate(t.getDate()-1),this.timeFrom=t,this.timeTill=new Date,this._statuses=new Set(["Completed","Terminated"])}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"instancesDeleted",{get:function(){return this._instancesDeleted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inProgress",{get:function(){return this._inProgress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this._statuses.size>0},enumerable:!0,configurable:!0}),t.prototype.purgeHistory=function(){var e=this;this._inProgress=!0,this._backendClient.call("POST","/purge-history",{timeFrom:this.timeFrom,timeTill:this.timeTill,statuses:Array.from(this._statuses.values())}).then(function(t){e._instancesDeleted=t.instancesDeleted},function(t){e.errorMessage="Purge history failed: "+t.message+"."+(t.response?t.response.data:"")+" "}).finally(function(){e._inProgress=!1})},t.prototype.getStatusIncluded=function(e){return this._statuses.has(e)},t.prototype.setStatusIncluded=function(e,t){t?this._statuses.add(e):this._statuses.delete(e)},Object(c.b)([L.e],t.prototype,"dialogOpen",null),Object(c.b)([L.e],t.prototype,"instancesDeleted",null),Object(c.b)([L.e],t.prototype,"inProgress",null),Object(c.b)([L.e],t.prototype,"isValid",null),Object(c.b)([L.l],t.prototype,"timeFrom",void 0),Object(c.b)([L.l],t.prototype,"timeTill",void 0),Object(c.b)([L.l],t.prototype,"_statuses",void 0),Object(c.b)([L.l],t.prototype,"_dialogOpen",void 0),Object(c.b)([L.l],t.prototype,"_inProgress",void 0),Object(c.b)([L.l],t.prototype,"_instancesDeleted",void 0),t}(he),Le=function(){function e(e){this._prefix=e}return e.prototype.setItem=function(e,t){localStorage.setItem(this._prefix+"::"+e,t)},e.prototype.setItems=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];null===r.value?localStorage.removeItem(this._prefix+"::"+r.fieldName):localStorage.setItem(this._prefix+"::"+r.fieldName,r.value)}},e.prototype.getItem=function(e){return localStorage.getItem(this._prefix+"::"+e)},e.prototype.removeItem=function(e){localStorage.removeItem(this._prefix+"::"+e)},e}(),xe=function(){function e(e){var t=this;this._vsCodeApi=e,this._handlers={},this._requests={},window.addEventListener("message",function(e){var n=e.data,r=t._handlers[n.id];if(r)r(n.data);else{var a=t._requests[n.id];a&&(n.data?a.resolve(n.data):a.reject(n.err),delete t._requests[n.id])}})}return Object.defineProperty(e.prototype,"isVsCode",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.call=function(e,t,n){var r=this,a=Math.random().toString();return this._vsCodeApi.postMessage({id:a,method:e,url:t,data:n}),new Promise(function(e,t){r._requests[a]={resolve:e,reject:t}})},e.prototype.setPurgeHistoryHandler=function(e){this._handlers.purgeHistory=e,this._vsCodeApi.postMessage({method:"IAmReady"})},e}(),Re=function(){function e(t,n){this._prefix=t,this._vsCodeApi=n;var r=this._vsCodeApi.getState();e.State=r||{}}return e.prototype.setItem=function(t,n){e.State[this._prefix+"::"+t]=n,this._vsCodeApi.setState(e.State)},e.prototype.setItems=function(t){for(var n=0,r=t;n<r.length;n++){var a=r[n];null===a.value?delete e.State[this._prefix+"::"+a.fieldName]:e.State[this._prefix+"::"+a.fieldName]=a.value}this._vsCodeApi.setState(e.State)},e.prototype.getItem=function(t){return e.State[this._prefix+"::"+t]},e.prototype.removeItem=function(t){delete e.State[this._prefix+"::"+t],this._vsCodeApi.setState(e.State)},e.State={},e}(),We=new(function(){function e(){var e=this,t=void 0;try{t=acquireVsCodeApi()}catch(r){}if(t){var n=new xe(t);this.purgeHistoryDialogState=new Me(n),this.orchestrationId?this.orchestrationDetailsState=new Ae(this.orchestrationId,n,new Re("OrchestrationDetailsState",t)):(this.orchestrationsState=new fe(n,new Re("OrchestrationsState",t)),n.setPurgeHistoryHandler(function(){return e.purgeHistoryDialogState.dialogOpen=!0}))}else{this.loginState=new De;n=new je(this.loginState.getAuthorizationHeaderAsync);this.purgeHistoryDialogState=new Me(n),this.orchestrationId?this.orchestrationDetailsState=new Ae(this.orchestrationId,n,new Le("OrchestrationDetailsState")):(this.mainMenuState=new Fe(n,this.purgeHistoryDialogState),this.orchestrationsState=new fe(n,new Le("OrchestrationsState")))}}return Object.defineProperty(e.prototype,"orchestrationId",{get:function(){if(OrchestrationIdFromVsCode)return OrchestrationIdFromVsCode;var e="/api/monitor/orchestrations/";return window.location.pathname.startsWith(e)?window.location.pathname.substr(e.length):""},enumerable:!0,configurable:!0}),e}());a.render(r.createElement(we,{state:We}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/api/monitor",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/api/monitor/service-worker.js";o?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(e)})}}()}},[[108,2,1]]]);
//# sourceMappingURL=main.8231f659.chunk.js.map