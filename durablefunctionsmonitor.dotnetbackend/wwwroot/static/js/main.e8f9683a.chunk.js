(this["webpackJsonpdurablefunctionsmonitor.react"]=this["webpackJsonpdurablefunctionsmonitor.react"]||[]).push([[0],{272:function(e,t,a){e.exports=a(522)},277:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){},283:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},502:function(e,t,a){var r={"./locale":235,"./locale.js":235};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id=502},504:function(e,t,a){},505:function(e,t,a){e.exports=a.p+"static/media/logo.9b5d7869.svg"},522:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(14),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{var t=e.installing;t&&(t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}a(277);var s,l,c,m,u,h=a(15),d=a(596),p=a(592),g=a(582),y=a(126),b=a(599),E=a(581),O=a(20),f=a(245),v=(a(278),a(564)),_=a(603),C=a(253),S=a(604),w=a(601),P=a(571),T=a(572),D=a(573),j=a(574),k=a(568),I=a(575),N=(a(279),Object(h.a)(s=class extends r.Component{render(){var e=this.props.state;return r.createElement("div",null,r.createElement(v.a,{color:e.isLoggedInAnonymously?"secondary":"inherit",onClick:t=>e.menuAnchorElement=t.currentTarget},r.createElement(k.a,null),r.createElement(d.a,{width:5}),r.createElement(_.a,{title:e.isLoggedInAnonymously?"Ensure this endpoint is not exposed to the public!":""},r.createElement(y.a,{color:e.isLoggedInAnonymously?"secondary":"inherit"},e.isLoggedInAnonymously?"Anonymous":e.userName))),!e.isLoggedInAnonymously&&r.createElement(C.a,{anchorEl:e.menuAnchorElement,keepMounted:!0,open:!!e.menuAnchorElement,onClose:()=>e.menuAnchorElement=void 0},r.createElement(S.a,{onClick:()=>e.logout()},"Login under a different name")),r.createElement(w.a,{open:!e.isLoggedIn},r.createElement(P.a,null,!e.errorMessage&&r.createElement("div",null,r.createElement(T.a,{className:"login-progress"},r.createElement(D.a,null)),r.createElement(j.a,null,"Login in progress...")),!!e.errorMessage&&r.createElement("div",null,r.createElement(T.a,{className:"login-progress"},r.createElement(I.a,{color:"secondary",fontSize:"large"})),r.createElement(j.a,{color:"secondary"},"Login failed. ",e.errorMessage)))))}})||s),F=a(524),M=a(577),x=a(578),A=a(579),z=a(580),R=a(252),L=a.n(R),W=a(7),V=a(5),B=a(602),H=a(576),q=a(251),Y=a.n(q),U=a(250),J=a.n(U),K=(a(283),l=V.d.bound,Object(h.a)((m=class extends r.Component{render(){var e=this.props.state;return r.createElement(B.a,{className:"message-snackbar",anchorOrigin:{vertical:"top",horizontal:"right"},open:!!e.errorMessage,autoHideDuration:6e3,onClose:this.handleClose},r.createElement(H.a,{className:"error-snackbar-content",message:r.createElement("span",null,r.createElement(J.a,{className:"error-icon"}),e.errorMessage),action:[r.createElement(F.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},r.createElement(Y.a,null))]}))}handleClose(){this.props.state.errorMessage=""}},Object(W.a)(m.prototype,"handleClose",[l],Object.getOwnPropertyDescriptor(m.prototype,"handleClose"),m.prototype),c=m))||c),G=Object(h.a)(u=class extends r.Component{componentDidMount(){this.props.state.setWindowTitle()}render(){var e=this.props.state;return r.createElement("div",null,r.createElement(F.a,{color:"inherit",onClick:t=>e.menuAnchorElement=t.currentTarget},r.createElement(L.a,null)),r.createElement(C.a,{anchorEl:e.menuAnchorElement,keepMounted:!0,open:!!e.menuAnchorElement,onClose:()=>e.menuAnchorElement=void 0},r.createElement(S.a,{onClick:()=>e.showConnectionParamsDialog()},"Manage Storage Connection Settings..."),r.createElement(S.a,{onClick:()=>e.showPurgeHistoryDialog()},"Purge Instance History...")),r.createElement(w.a,{open:e.connectionParamsDialogOpen,onClose:()=>e.connectionParamsDialogOpen=!1},r.createElement(M.a,null,"Manage Storage Connection Settings"),r.createElement(P.a,null,e.inProgress?r.createElement(x.a,null):r.createElement(d.a,{height:4}),r.createElement(j.a,null,e.isReadonly?"Change the below values via your application settings ('DFM_HUB_NAME' and 'AzureWebJobsStorage' respectively)":"The below values will be saved to local.settings.json file."),r.createElement(A.a,{autoFocus:!0,margin:"dense",label:"Hub Name",fullWidth:!0,disabled:e.inProgress,InputProps:{readOnly:e.isReadonly},InputLabelProps:{shrink:!0},value:e.hubName,onChange:t=>e.hubName=t.target.value}),r.createElement(A.a,{autoFocus:!0,margin:"dense",label:"Azure Storage Connection String",fullWidth:!0,disabled:e.inProgress,InputProps:{readOnly:e.isReadonly},InputLabelProps:{shrink:!0},value:e.connectionString,onChange:t=>e.connectionString=t.target.value}),r.createElement(K,{state:e})),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.connectionParamsDialogOpen=!1,color:"primary"},"Cancel"),!e.isReadonly&&r.createElement(v.a,{onClick:()=>e.saveConnectionParams(),disabled:!e.isDirty||!e.hubName||!e.connectionString||e.inProgress,color:"secondary"},"Save"))))}})||u,$=a(583),Q=a(527),Z=a(528),X=a(600),ee=a(532),te=a(585),ae=a(586),re=a(598),ne=a(530),ie=a(587),oe=a(588),se=a(589),le=a(590),ce=a(605),me=a(591),ue=a(254),he=a(594),de=a(123),pe=a.n(de),ge=(a(285),a(22)),ye=a.n(ge);class be{static momentAsUtc(e){if(!e||!e.isValid())return e;var t=ye()(e.toISOString(!0).slice(0,19)+"Z");return t.utc(),t}static isValidMoment(e){return!!e&&e.isValid()&&e.isAfter(be.MinMoment)&&e.isBefore(be.MaxMoment)}static formatDateTime(e){return e.toISOString().slice(0,16)}}be.MinMoment=ye()("1900-01-01").utc(),be.MaxMoment=ye()("2100-01-01").utc();var Ee=["Timestamp","EventType","Name","ScheduledTime","Result","Details"];class Oe{constructor(){this.instanceId=void 0,this.name=void 0,this.entityId=void 0,this.runtimeStatus=void 0,this.entityType=void 0,this.lastEvent=void 0,this.input=void 0,this.customStatus=void 0,this.output=void 0,this.createdTime=void 0,this.lastUpdatedTime=void 0,this.historyEvents=void 0}}var fe,ve,_e,Ce,Se,we,Pe,Te,De,je,ke,Ie,Ne,Fe,Me,xe,Ae,ze,Re,Le=["instanceId","name","createdTime","lastUpdatedTime","runtimeStatus","lastEvent","input","output","customStatus"],We=(fe=V.d.bound,Object(h.a)((_e=class extends r.Component{render(){var e,t;return this.props.backendClient.isVsCode?r.createElement(E.a,{href:"#",onClick:this.onLinkClicked},null!==(e=this.props.title)&&void 0!==e?e:this.props.orchestrationId):r.createElement(E.a,{href:"/orchestrations/".concat(this.extraSanitizeHrefComponent(this.props.orchestrationId)),target:"_blank"},null!==(t=this.props.title)&&void 0!==t?t:this.props.orchestrationId)}onLinkClicked(){this.props.backendClient.call("OpenInNewWindow",this.props.orchestrationId)}extraSanitizeHrefComponent(e){return e.replace(/javascript:/gi,"")}},Object(W.a)(_e.prototype,"onLinkClicked",[fe],Object.getOwnPropertyDescriptor(_e.prototype,"onLinkClicked"),_e.prototype),ve=_e))||ve),Ve=a(10),Be=(a(73),Ce=class{constructor(){Object(Ve.a)(this,"errorMessage",Se,this)}},Se=Object(W.a)(Ce.prototype,"errorMessage",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ce);!function(e){e[e.Equals=0]="Equals",e[e.StartsWith=1]="StartsWith",e[e.Contains=2]="Contains"}(ze||(ze={})),function(e){e[e.ShowBoth=0]="ShowBoth",e[e.OrchestrationsOnly=1]="OrchestrationsOnly",e[e.DurableEntitiesOnly=2]="DurableEntitiesOnly"}(Re||(Re={}));var He,qe,Ye,Ue,Je,Ke,Ge,$e,Qe,Ze,Xe,et,tt,at,rt,nt,it,ot,st,lt,ct,mt=(we=class extends Be{get inProgress(){return this._inProgress}get orchestrations(){return this._orchestrations}get autoRefresh(){return this._autoRefresh}set autoRefresh(e){this._autoRefresh=e,this._localStorage.setItem("autoRefresh",this._autoRefresh.toString()),this.loadOrchestrations(!0)}get timeFrom(){return this._timeFrom}set timeFrom(e){this._timeFrom=e,this.resetOrderBy()}get timeTill(){return this._timeTill?this._timeTill:ye()().utc()}set timeTill(e){this._timeTill=e,this.resetOrderBy()}get timeTillEnabled(){return!!this._timeTill}set timeTillEnabled(e){this._timeTill=e?ye()().utc():null,e||(this.resetOrderBy(),this.reloadOrchestrations())}get orderByDirection(){return this._orderByDirection}get orderBy(){return this._orderBy}set orderBy(e){this._orderBy!==e?this._orderBy=e:this._orderByDirection="desc"===this._orderByDirection?"asc":"desc",this.reloadOrchestrations()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e}get filterOperator(){return this._filterOperator}set filterOperator(e){this._filterOperator=e,this._filterValue&&"0"!==this._filteredColumn&&this.reloadOrchestrations()}get filteredColumn(){return this._filteredColumn}set filteredColumn(e){this._filteredColumn=e,this._filterValue&&("0"===this._filteredColumn&&(this._filterValue=""),this.reloadOrchestrations())}get showEntityType(){return Re[this._showEntityType]}set showEntityType(e){this._showEntityType=Re[e],this.reloadOrchestrations()}get showLastEventColumn(){return"lastEvent"===this._filteredColumn&&!!this._oldFilterValue}get backendClient(){return this._backendClient}constructor(e,t){var a;super(),this._backendClient=e,this._localStorage=t,Object(Ve.a)(this,"_inProgress",Pe,this),Object(Ve.a)(this,"_orchestrations",Te,this),Object(Ve.a)(this,"_orderByDirection",De,this),Object(Ve.a)(this,"_orderBy",je,this),Object(Ve.a)(this,"_autoRefresh",ke,this),Object(Ve.a)(this,"_timeFrom",Ie,this),Object(Ve.a)(this,"_timeTill",Ne,this),Object(Ve.a)(this,"_filterValue",Fe,this),Object(Ve.a)(this,"_filterOperator",Me,this),Object(Ve.a)(this,"_filteredColumn",xe,this),Object(Ve.a)(this,"_showEntityType",Ae,this),this._noMorePagesToLoad=!1,this._pageSize=50,this._autoRefreshToken=void 0,this._oldFilterValue="",this._oldTimeFrom=void 0,this._oldTimeTill=void 0;var r=this._localStorage.getItem("timeFrom");(a=r?ye()(r):ye()().subtract(1,"days")).utc(),this._timeFrom=a,this._oldTimeFrom=a;var n=this._localStorage.getItem("timeTill");n&&(this._timeTill=ye()(n),this._timeTill.utc(),this._oldTimeTill=this._timeTill);var i=this._localStorage.getItem("filteredColumn");i&&(this._filteredColumn=i);var o=this._localStorage.getItem("filterOperator");o&&(this._filterOperator=ze[o]);var s=this._localStorage.getItem("filterValue");s&&(this._filterValue=s,this._oldFilterValue=s);var l=this._localStorage.getItem("showEntityType");l&&(this._showEntityType=Re[l]);var c=this._localStorage.getItem("autoRefresh");c&&(this._autoRefresh=Number(c));var m=this._localStorage.getItem("orderBy");m&&(this._orderBy=m);var u=this._localStorage.getItem("orderByDirection");u&&(this._orderByDirection=u)}applyTimeFrom(){be.isValidMoment(this._timeFrom)&&this._oldTimeFrom!==this._timeFrom&&this.reloadOrchestrations()}applyTimeTill(){be.isValidMoment(this._timeTill)&&this._oldTimeTill!==this._timeTill&&this.reloadOrchestrations()}applyFilterValue(){this._oldFilterValue!==this._filterValue&&this.reloadOrchestrations()}reloadOrchestrations(){this._orchestrations=[],this._noMorePagesToLoad=!1,be.isValidMoment(this._timeFrom)||(this._timeFrom=this._oldTimeFrom),this._timeTill&&!be.isValidMoment(this._timeTill)&&(this._timeTill=this._oldTimeTill),this._localStorage.setItems([{fieldName:"timeFrom",value:this._timeFrom.toISOString()},{fieldName:"timeTill",value:this._timeTill?this._timeTill.toISOString():null},{fieldName:"filteredColumn",value:this._filteredColumn},{fieldName:"filterOperator",value:ze[this._filterOperator]},{fieldName:"filterValue",value:this._filterValue?this._filterValue:null},{fieldName:"showEntityType",value:Re[this._showEntityType]},{fieldName:"orderBy",value:this._orderBy},{fieldName:"orderByDirection",value:this._orderByDirection}]),this.loadOrchestrations(),this._oldFilterValue=this._filterValue,this._oldTimeFrom=this._timeFrom,this._oldTimeTill=this._timeTill}loadOrchestrations(e=!1){if(!(this.inProgress||this._noMorePagesToLoad&&!this._autoRefresh)){this._inProgress=!0;var t=this._timeFrom.toISOString(),a=this._timeTill?this._timeTill.toISOString():ye()().utc().toISOString(),r="&$filter=createdTime ge '".concat(t,"' and createdTime le '").concat(a,"'");if(this._showEntityType===Re.OrchestrationsOnly?r+=" and entityType eq 'Orchestration'":this._showEntityType===Re.DurableEntitiesOnly&&(r+=" and entityType eq 'DurableEntity'"),this._filterValue&&"0"!==this._filteredColumn)switch(r+=" and ",this._filterOperator){case ze.Equals:r+="".concat(this._filteredColumn," eq '").concat(this._filterValue,"'");break;case ze.StartsWith:r+="startswith(".concat(this._filteredColumn,", '").concat(this._filterValue,"')");break;case ze.Contains:r+="contains(".concat(this._filteredColumn,", '").concat(this._filterValue,"')")}var n=e?0:this._orchestrations.length,i=this._orderBy?"&$orderby=".concat(this._orderBy," ").concat(this.orderByDirection):"",o="/orchestrations?$top=".concat(this._pageSize,"&$skip=").concat(n).concat(r).concat(i);this._backendClient.call("GET",o).then(t=>{t.length?e?this._orchestrations=t:this._orchestrations.push(...t):this._noMorePagesToLoad=!0,this._autoRefresh&&(this._autoRefreshToken&&clearTimeout(this._autoRefreshToken),this._autoRefreshToken=setTimeout(()=>this.loadOrchestrations(!0),1e3*this._autoRefresh))},e=>{this._autoRefresh=0,this.errorMessage="Load failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}}resetOrderBy(){this._orderBy="",this._orderByDirection="asc"}},Object(W.a)(we.prototype,"inProgress",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"inProgress"),we.prototype),Object(W.a)(we.prototype,"orchestrations",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"orchestrations"),we.prototype),Object(W.a)(we.prototype,"autoRefresh",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"autoRefresh"),we.prototype),Object(W.a)(we.prototype,"timeFrom",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"timeFrom"),we.prototype),Object(W.a)(we.prototype,"timeTill",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"timeTill"),we.prototype),Object(W.a)(we.prototype,"timeTillEnabled",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"timeTillEnabled"),we.prototype),Object(W.a)(we.prototype,"orderByDirection",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"orderByDirection"),we.prototype),Object(W.a)(we.prototype,"orderBy",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"orderBy"),we.prototype),Object(W.a)(we.prototype,"filterValue",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"filterValue"),we.prototype),Object(W.a)(we.prototype,"filterOperator",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"filterOperator"),we.prototype),Object(W.a)(we.prototype,"filteredColumn",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"filteredColumn"),we.prototype),Object(W.a)(we.prototype,"showEntityType",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"showEntityType"),we.prototype),Object(W.a)(we.prototype,"showLastEventColumn",[V.e],Object.getOwnPropertyDescriptor(we.prototype,"showLastEventColumn"),we.prototype),Pe=Object(W.a)(we.prototype,"_inProgress",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Te=Object(W.a)(we.prototype,"_orchestrations",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),De=Object(W.a)(we.prototype,"_orderByDirection",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"asc"}}),je=Object(W.a)(we.prototype,"_orderBy",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ke=Object(W.a)(we.prototype,"_autoRefresh",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ie=Object(W.a)(we.prototype,"_timeFrom",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=Object(W.a)(we.prototype,"_timeTill",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe=Object(W.a)(we.prototype,"_filterValue",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Me=Object(W.a)(we.prototype,"_filterOperator",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ze.Equals}}),xe=Object(W.a)(we.prototype,"_filteredColumn",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0"}}),Ae=Object(W.a)(we.prototype,"_showEntityType",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Re.ShowBoth}}),we),ut=(He=V.d.bound,Object(h.a)((Ye=class extends r.Component{componentDidMount(){this.props.state.loadOrchestrations(),document.addEventListener("scroll",e=>{var t=e.target.scrollingElement;if(t){t.scrollHeight-window.innerHeight-t.scrollTop<100&&this.props.state.loadOrchestrations()}})}render(){var e=this.props.state;return r.createElement(r.Fragment,null,e.inProgress?r.createElement(x.a,null):r.createElement(d.a,{height:4}),r.createElement(g.a,{variant:"dense",className:"top-toolbar"},r.createElement($.a,{container:!0,className:"toolbar-grid1"},r.createElement($.a,{item:!0,xs:12},r.createElement(he.a,{className:"from-input",style:{marginLeft:10},ampm:!1,autoOk:!0,label:"From \xa0\xa0 (UTC)",invalidDateMessage:"",format:"YYYY-MM-DD HH:mm:ss",disabled:e.inProgress,value:e.timeFrom,onChange:t=>e.timeFrom=be.momentAsUtc(t),onBlur:()=>e.applyTimeFrom(),onAccept:()=>e.applyTimeFrom(),onKeyPress:this.handleKeyPress})),r.createElement($.a,{item:!0,xs:12,className:"toolbar-grid1-item2"},r.createElement(Q.a,null,r.createElement(Z.a,{className:"till-label",htmlFor:"till-checkbox",shrink:!0},"Till"),r.createElement(X.a,{id:"till-checkbox",className:"till-checkbox",disabled:e.inProgress,checked:e.timeTillEnabled,onChange:t=>e.timeTillEnabled=t.target.checked})),e.timeTillEnabled?r.createElement(he.a,{className:"till-input",ampm:!1,autoOk:!0,label:"(UTC)",invalidDateMessage:"",format:"YYYY-MM-DD HH:mm:ss",disabled:e.inProgress,value:e.timeTill,onChange:t=>e.timeTill=be.momentAsUtc(t),onBlur:()=>e.applyTimeTill(),onAccept:()=>e.applyTimeTill(),onKeyPress:this.handleKeyPress}):r.createElement(A.a,{className:"till-input",label:"(UTC)",placeholder:"[Now]",InputLabelProps:{shrink:!0},type:"text",disabled:!0}))),r.createElement($.a,{container:!0,className:"toolbar-grid2"},r.createElement($.a,{item:!0,xs:12},r.createElement(Q.a,null,r.createElement(Z.a,{htmlFor:"filtered-column-select"},"Filtered Column"),r.createElement(ee.a,{className:"toolbar-select filtered-column-input",disabled:e.inProgress,value:e.filteredColumn,onChange:t=>e.filteredColumn=t.target.value,inputProps:{id:"filtered-column-select"}},r.createElement(S.a,{value:"0"},"[Not Selected]"),Le.map(e=>r.createElement(S.a,{key:e,value:e},e)))),r.createElement(Q.a,{className:"toolbar-grid2-item1-select"},r.createElement(Z.a,{htmlFor:"filter-operator-select"},"Filter Operator"),r.createElement(ee.a,{className:"toolbar-select",disabled:e.inProgress,value:e.filterOperator,onChange:t=>e.filterOperator=t.target.value,inputProps:{id:"filter-operator-select"}},r.createElement(S.a,{value:0},"Equals"),r.createElement(S.a,{value:1},"Starts With"),r.createElement(S.a,{value:2},"Contains")))),r.createElement($.a,{item:!0,xs:12,className:"toolbar-grid2-item2"},r.createElement(A.a,{className:"filter-value-input",label:"Filter Value",InputLabelProps:{shrink:!0},placeholder:"[some text or 'null']",disabled:"0"===e.filteredColumn||e.inProgress,value:e.filterValue,onChange:t=>e.filterValue=t.target.value,onBlur:()=>e.applyFilterValue(),onKeyPress:this.handleKeyPress}))),r.createElement(te.a,{value:e.showEntityType,onChange:t=>e.showEntityType=t.target.value},r.createElement(ae.a,{className:"entity-type-radio",disabled:e.inProgress,value:Re[Re.ShowBoth],control:r.createElement(re.a,null),label:r.createElement(y.a,{variant:"subtitle2"},"Show both")}),r.createElement(ae.a,{className:"entity-type-radio",disabled:e.inProgress,value:Re[Re.OrchestrationsOnly],control:r.createElement(re.a,null),label:r.createElement(y.a,{variant:"subtitle2"},"Orchestrations only")}),r.createElement(ae.a,{className:"entity-type-radio",disabled:e.inProgress,value:Re[Re.DurableEntitiesOnly],control:r.createElement(re.a,null),label:r.createElement(y.a,{variant:"subtitle2"},"Durable Entities only")})),r.createElement(y.a,{style:{flex:1}}),r.createElement($.a,{container:!0,className:"toolbar-grid3"},r.createElement($.a,{item:!0,xs:12},r.createElement(Q.a,{className:"form-control-float-right"},r.createElement(Z.a,{htmlFor:"auto-refresh-select"},"Auto-refresh"),r.createElement(ee.a,{className:"toolbar-select",inputProps:{id:"auto-refresh-select"},value:e.autoRefresh,onChange:t=>e.autoRefresh=t.target.value},r.createElement(S.a,{value:0},"Never"),r.createElement(S.a,{value:1},"Every 1 sec."),r.createElement(S.a,{value:5},"Every 5 sec."),r.createElement(S.a,{value:10},"Every 10 sec.")))),r.createElement($.a,{item:!0,xs:12,className:"toolbar-grid3-item2"},r.createElement(v.a,{className:"refresh-button form-control-float-right",variant:"outlined",color:"default",size:"large",onClick:()=>e.reloadOrchestrations()},r.createElement(pe.a,null))))),r.createElement(ne.a,{className:"items-count-label"},e.orchestrations.length?"".concat(e.orchestrations.length," items shown"):""),e.orchestrations.length?this.renderTable(e):this.renderEmptyTable(),e.inProgress&&e.orchestrations.length?r.createElement(x.a,null):r.createElement(d.a,{height:4}),r.createElement(g.a,{variant:"dense"}),r.createElement(K,{state:this.props.state}))}renderEmptyTable(){return r.createElement(y.a,{variant:"h5",className:"empty-table-placeholder"},"This list is empty")}renderTable(e){return r.createElement(ie.a,{size:"small"},r.createElement(oe.a,null,r.createElement(se.a,null,Le.filter(t=>!!e.showLastEventColumn||"lastEvent"!==t).map(t=>r.createElement(le.a,{key:t},r.createElement(ce.a,{active:e.orderBy===t,direction:e.orderByDirection,onClick:()=>e.orderBy=t},t))))),r.createElement(me.a,null,e.orchestrations.map(t=>{var a={verticalAlign:"top"};return r.createElement(se.a,{key:t.instanceId,className:"runtime-status-"+t.runtimeStatus.toString().toLowerCase()},r.createElement(le.a,{className:"instance-id-cell",style:a},r.createElement(We,{orchestrationId:t.instanceId,backendClient:e.backendClient})),r.createElement(le.a,{className:"name-cell",style:a},t.name),r.createElement(le.a,{className:"datetime-cell",style:a},t.createdTime),r.createElement(le.a,{className:"datetime-cell",style:a},t.lastUpdatedTime),r.createElement(le.a,{style:a},t.runtimeStatus),e.showLastEventColumn&&r.createElement(le.a,{style:a},t.lastEvent),r.createElement(le.a,{className:"long-text-cell",style:a},r.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.input)})),r.createElement(le.a,{className:"output-cell",style:a},r.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.output)})),r.createElement(le.a,{className:"output-cell",style:a},r.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(t.customStatus)})))})))}handleKeyPress(e){"Enter"===e.key&&(e.preventDefault(),this.props.state.reloadOrchestrations())}},Object(W.a)(Ye.prototype,"handleKeyPress",[He],Object.getOwnPropertyDescriptor(Ye.prototype,"handleKeyPress"),Ye.prototype),qe=Ye))||qe),ht=a(597),dt=a(584),pt=(a(286),Object(h.a)(Ue=class extends r.Component{render(){var e=this.props.state;return r.createElement(r.Fragment,null,this.renderDialogs(e),r.createElement(v.a,{variant:"outlined",color:"primary",size:"large",onClick:()=>e.purgeConfirmationOpen=!0},"Purge"))}renderDialogs(e){return r.createElement(r.Fragment,null,r.createElement(w.a,{open:e.purgeConfirmationOpen,onClose:()=>e.purgeConfirmationOpen=!1},r.createElement(M.a,null,"Confirm Purge"),r.createElement(P.a,null,r.createElement(j.a,null,"You're about to purge entity '",e.orchestrationId,"'. This operation drops entity state from the underlying storage and cannot be undone. Are you sure?")),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.purgeConfirmationOpen=!1,color:"primary",autoFocus:!0},"Cancel"),r.createElement(v.a,{onClick:()=>e.purge(),color:"secondary"},"Yes, purge"))))}})||Ue),gt=Object(h.a)(Je=class extends r.Component{render(){var e=this.props.details;return r.createElement(r.Fragment,null,r.createElement($.a,{container:!0,className:"grid-container"},r.createElement($.a,{item:!0,xs:12,sm:12,md:3,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"entityId.name",value:e.entityId.name,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement($.a,{item:!0,xs:12,sm:6,md:3,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"entityId.key",value:e.entityId.key,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"createdTime",value:e.createdTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"lastUpdatedTime",value:e.lastUpdatedTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"runtimeStatus",value:e.runtimeStatus,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,className:e.runtimeStatus?"runtime-status-"+e.runtimeStatus.toLowerCase():""})),r.createElement($.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"input",value:JSON.stringify(e.input,null,3),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:10})),r.createElement($.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"customStatus",value:JSON.stringify(e.customStatus,null,3),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:10}))))}})||Je,yt=Object(h.a)(Ke=class extends r.Component{render(){var e=this.props.state;return r.createElement(r.Fragment,null,this.renderDialogs(e),r.createElement(v.a,{variant:"outlined",color:"primary",size:"medium",onClick:()=>e.rewindConfirmationOpen=!0},"Rewind"),r.createElement(d.a,{width:20}),r.createElement(v.a,{variant:"outlined",color:"primary",size:"medium",onClick:()=>e.terminateConfirmationOpen=!0},"Terminate"),r.createElement(d.a,{width:20}),r.createElement(v.a,{variant:"outlined",color:"primary",size:"medium",onClick:()=>e.raiseEventDialogOpen=!0},"Raise Event"),r.createElement(d.a,{width:20}),r.createElement(v.a,{variant:"outlined",color:"primary",size:"medium",onClick:()=>e.setCustomStatusDialogOpen=!0},"Set Custom Status"),r.createElement(d.a,{width:20}),r.createElement(v.a,{variant:"outlined",color:"primary",size:"medium",onClick:()=>e.purgeConfirmationOpen=!0},"Purge"))}renderDialogs(e){return r.createElement(r.Fragment,null,r.createElement(w.a,{open:e.rewindConfirmationOpen,onClose:()=>e.rewindConfirmationOpen=!1},r.createElement(M.a,null,"Confirm Rewind"),r.createElement(P.a,null,r.createElement(j.a,null,"You're about to rewind orchestration '",e.orchestrationId,"'. Are you sure?")),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.rewindConfirmationOpen=!1,color:"primary",autoFocus:!0},"Cancel"),r.createElement(v.a,{onClick:()=>e.rewind(),color:"secondary"},"Yes, rewind"))),r.createElement(w.a,{open:e.terminateConfirmationOpen,onClose:()=>e.terminateConfirmationOpen=!1},r.createElement(M.a,null,"Confirm Terminate"),r.createElement(P.a,null,r.createElement(j.a,null,"You're about to terminate orchestration '",e.orchestrationId,"'. This operation cannot be undone. Are you sure?")),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.terminateConfirmationOpen=!1,color:"primary",autoFocus:!0},"Cancel"),r.createElement(v.a,{onClick:()=>e.terminate(),color:"secondary"},"Yes, terminate"))),r.createElement(w.a,{fullWidth:!0,open:e.raiseEventDialogOpen,onClose:()=>e.raiseEventDialogOpen=!1},r.createElement(M.a,null,"Raise Event"),r.createElement(P.a,null,r.createElement(j.a,null,"Provide event name and some additional data"),r.createElement(A.a,{autoFocus:!0,margin:"dense",label:"Event Name",InputLabelProps:{shrink:!0},fullWidth:!0,value:e.eventName,onChange:t=>e.eventName=t.target.value}),r.createElement(A.a,{margin:"dense",label:"Event Data (JSON)",InputLabelProps:{shrink:!0},fullWidth:!0,multiline:!0,rows:7,value:e.eventData,onChange:t=>e.eventData=t.target.value})),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.raiseEventDialogOpen=!1,color:"primary"},"Cancel"),r.createElement(v.a,{onClick:()=>e.raiseEvent(),disabled:!e.eventName,color:"secondary"},"Raise"))),r.createElement(w.a,{fullWidth:!0,open:e.setCustomStatusDialogOpen,onClose:()=>e.setCustomStatusDialogOpen=!1},r.createElement(M.a,null,"Set customStatus"),r.createElement(P.a,null,r.createElement(j.a,null,"customStatus field is a way for external clients to differentiate instances of your orchestration. It does not affect the orchestration workflow itself."),r.createElement(A.a,{margin:"dense",InputLabelProps:{shrink:!0},label:"New customStatus (JSON)",fullWidth:!0,multiline:!0,rows:10,value:e.newCustomStatus,onChange:t=>e.newCustomStatus=t.target.value})),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.setCustomStatusDialogOpen=!1,color:"primary"},"Cancel"),r.createElement(v.a,{onClick:()=>e.setCustomStatus(),disabled:!e.isCustomStatusDirty,color:"secondary"},"Apply"))),r.createElement(w.a,{open:e.purgeConfirmationOpen,onClose:()=>e.purgeConfirmationOpen=!1},r.createElement(M.a,null,"Confirm Purge"),r.createElement(P.a,null,r.createElement(j.a,null,"You're about to purge orchestration '",e.orchestrationId,"'. This operation drops orchestration state from the underlying storage and cannot be undone. Are you sure?")),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.purgeConfirmationOpen=!1,color:"primary",autoFocus:!0},"Cancel"),r.createElement(v.a,{onClick:()=>e.purge(),color:"secondary"},"Yes, purge"))))}})||Ke,bt=a(69),Et=a(152),Ot=a.n(Et);!function(e){e[e.Details=0]="Details",e[e.SequenceDiagram=1]="SequenceDiagram"}(ct||(ct={}));var ft,vt,_t,Ct,St,wt=(Ge=class extends Be{get selectedTab(){return this._selectedTab}set selectedTab(e){this._selectedTab=e,this._sequenceDiagramSvg||e!==ct.SequenceDiagram||this.loadSequenceDiagram()}get sequenceDiagramSvg(){return this._sequenceDiagramSvg}get orchestrationId(){return this._orchestrationId}get inProgress(){return this._inProgress}get autoRefresh(){return this._autoRefresh}set autoRefresh(e){this._autoRefresh=e,this._localStorage.setItem("autoRefresh",this._autoRefresh.toString()),this.loadDetails()}get raiseEventDialogOpen(){return this._raiseEventDialogOpen}set raiseEventDialogOpen(e){this._raiseEventDialogOpen=e,this.eventName="",this.eventData=""}get setCustomStatusDialogOpen(){return this._setCustomStatusDialogOpen}set setCustomStatusDialogOpen(e){this._setCustomStatusDialogOpen=e,this.newCustomStatus=this.details.customStatus?JSON.stringify(this.details.customStatus):""}get isCustomStatusDirty(){return this.details.customStatus?this.newCustomStatus!==JSON.stringify(this.details.customStatus):!!this.newCustomStatus}get backendClient(){return this._backendClient}constructor(e,t,a){super(),this._orchestrationId=e,this._backendClient=t,this._localStorage=a,Object(Ve.a)(this,"details",$e,this),Object(Ve.a)(this,"rewindConfirmationOpen",Qe,this),Object(Ve.a)(this,"terminateConfirmationOpen",Ze,this),Object(Ve.a)(this,"purgeConfirmationOpen",Xe,this),Object(Ve.a)(this,"eventName",et,this),Object(Ve.a)(this,"eventData",tt,this),Object(Ve.a)(this,"newCustomStatus",at,this),Object(Ve.a)(this,"_selectedTab",rt,this),Object(Ve.a)(this,"_sequenceDiagramSvg",nt,this),Object(Ve.a)(this,"_inProgress",it,this),Object(Ve.a)(this,"_raiseEventDialogOpen",ot,this),Object(Ve.a)(this,"_setCustomStatusDialogOpen",st,this),Object(Ve.a)(this,"_autoRefresh",lt,this),this._autoRefreshToken=void 0,this._mermaidInitialized=!1;var r=this._localStorage.getItem("autoRefresh");r&&(this._autoRefresh=Number(r))}rewind(){this.rewindConfirmationOpen=!1;var e="/orchestrations('".concat(this._orchestrationId,"')/rewind");this._inProgress=!0,this._backendClient.call("POST",e).then(()=>{this._inProgress=!1,this.loadDetails()},e=>{this._inProgress=!1,this.errorMessage="Failed to rewind: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}terminate(){this.terminateConfirmationOpen=!1;var e="/orchestrations('".concat(this._orchestrationId,"')/terminate");this._inProgress=!0,this._backendClient.call("POST",e).then(()=>{this._inProgress=!1,this.loadDetails()},e=>{this._inProgress=!1,this.errorMessage="Failed to terminate: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}purge(){this.purgeConfirmationOpen=!1;var e="/orchestrations('".concat(this._orchestrationId,"')/purge");this._inProgress=!0,this._backendClient.call("POST",e).then(()=>{this._inProgress=!1,this.details=new Oe},e=>{this._inProgress=!1,this.errorMessage="Failed to purge: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}raiseEvent(){var e="/orchestrations('".concat(this._orchestrationId,"')/raise-event"),t={name:this.eventName,data:null};try{t.data=JSON.parse(this.eventData)}catch(a){return void(this.errorMessage="Failed to parse event data: ".concat(a.message))}finally{this.raiseEventDialogOpen=!1}this._inProgress=!0,this._backendClient.call("POST",e,t).then(()=>{this._inProgress=!1,this.loadDetails()},e=>{this._inProgress=!1,this.errorMessage="Failed to raise an event: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}setCustomStatus(){var e="/orchestrations('".concat(this._orchestrationId,"')/set-custom-status"),t=null;try{this.newCustomStatus&&(t=JSON.parse(this.newCustomStatus))}catch(a){return void(this.errorMessage="Failed to parse custom status: ".concat(a.message))}finally{this.setCustomStatusDialogOpen=!1}this._inProgress=!0,this._backendClient.call("POST",e,t).then(()=>{this._inProgress=!1,this.loadDetails()},e=>{this._inProgress=!1,this.errorMessage="Failed to set custom status: ".concat(e.message,".").concat(e.response?e.response.data:""," ")})}loadDetails(){this.inProgress||(this._inProgress=!0,this._sequenceDiagramSvg="",this.internalLoadDetails(this._orchestrationId).then(e=>{this.details=e,this._autoRefresh&&(this._autoRefreshToken&&clearTimeout(this._autoRefreshToken),this._autoRefreshToken=setTimeout(()=>this.loadDetails(),1e3*this._autoRefresh)),this._inProgress=!1,this._selectedTab===ct.SequenceDiagram&&this.loadSequenceDiagram()},e=>{this._inProgress=!1,this._autoRefresh=0,this.errorMessage="Load failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}))}internalLoadDetails(e){var t="/orchestrations('".concat(e,"')"),a=t+"/suborchestrations";return Promise.all([this._backendClient.call("GET",t),this._backendClient.call("GET",a)]).then(t=>{var a=t[0];if(!a)throw{message:"Orchestration '".concat(e,"' not found.")};if(a.history&&(a.historyEvents=a.history),"Orchestration"===a.entityType){var r,n=t[1],i=a.historyEvents.filter(e=>"SubOrchestrationInstanceCompleted"===e.EventType),o=Object(bt.a)(n);try{var s=function(){var e=r.value,t=i.findIndex(t=>t.FunctionName===e.subOrchestrationName&&t.ScheduledTime===e.scheduledTime);if(t<0)return"continue";i[t].SubOrchestrationId=e.instanceId,i.splice(t,1)};for(o.s();!(r=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}}return a})}loadSequenceDiagram(){this.inProgress||(this._inProgress=!0,this._mermaidInitialized||(Ot.a.initialize({startOnLoad:!0}),this._mermaidInitialized=!0),Promise.all(this.getSequenceForOrchestration(this.details.name,".",this.details.historyEvents)).then(e=>{var t="sequenceDiagram \n"+e.join("");console.log(t);try{Ot.a.render("mermaidSvgId",t,e=>{this._sequenceDiagramSvg=e})}catch(a){this.errorMessage="Failed to render diagram: ".concat(a.message)}this._inProgress=!1},e=>{this._inProgress=!1,this._autoRefresh=0,this.errorMessage="Diagram creation failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}))}getSequenceForOrchestration(e,t,a){var r,n=[],i=Object(bt.a)(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;switch(o.EventType){case"ExecutionStarted":var s="".concat(t,"->>+").concat(e,":[ExecutionStarted] \n");n.push(Promise.resolve(s));break;case"SubOrchestrationInstanceCompleted":o.SubOrchestrationId&&n.push(new Promise((t,a)=>{this.internalLoadDetails(o.SubOrchestrationId).then(r=>{Promise.all(this.getSequenceForOrchestration(r.name,e,r.historyEvents)).then(e=>{t(e.join(""))},a)},a)}));break;case"TaskCompleted":s="".concat(e,"->>").concat(e,":").concat(o.FunctionName," \n");n.push(Promise.resolve(s));break;case"TaskFailed":s="".concat(e,"-x").concat(e,":").concat(o.FunctionName,"(failed) \n");n.push(Promise.resolve(s));break;case"EventRaised":s="".concat(".","->>").concat(e,":").concat(o.Name," \n");n.push(Promise.resolve(s));break;case"TimerFired":s="".concat(".","->>").concat(e,":[TimerFired] \n");n.push(Promise.resolve(s));break;case"ExecutionCompleted":s="".concat(e,"--\x3e>-").concat(t,":[ExecutionCompleted] \n");n.push(Promise.resolve(s))}}}catch(l){i.e(l)}finally{i.f()}return n}},Object(W.a)(Ge.prototype,"selectedTab",[V.e],Object.getOwnPropertyDescriptor(Ge.prototype,"selectedTab"),Ge.prototype),Object(W.a)(Ge.prototype,"sequenceDiagramSvg",[V.e],Object.getOwnPropertyDescriptor(Ge.prototype,"sequenceDiagramSvg"),Ge.prototype),$e=Object(W.a)(Ge.prototype,"details",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Oe}}),Object(W.a)(Ge.prototype,"orchestrationId",[V.e],Object.getOwnPropertyDescriptor(Ge.prototype,"orchestrationId"),Ge.prototype),Object(W.a)(Ge.prototype,"inProgress",[V.e],Object.getOwnPropertyDescriptor(Ge.prototype,"inProgress"),Ge.prototype),Object(W.a)(Ge.prototype,"autoRefresh",[V.e],Object.getOwnPropertyDescriptor(Ge.prototype,"autoRefresh"),Ge.prototype),Object(W.a)(Ge.prototype,"raiseEventDialogOpen",[V.e],Object.getOwnPropertyDescriptor(Ge.prototype,"raiseEventDialogOpen"),Ge.prototype),Object(W.a)(Ge.prototype,"setCustomStatusDialogOpen",[V.e],Object.getOwnPropertyDescriptor(Ge.prototype,"setCustomStatusDialogOpen"),Ge.prototype),Object(W.a)(Ge.prototype,"isCustomStatusDirty",[V.e],Object.getOwnPropertyDescriptor(Ge.prototype,"isCustomStatusDirty"),Ge.prototype),Qe=Object(W.a)(Ge.prototype,"rewindConfirmationOpen",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ze=Object(W.a)(Ge.prototype,"terminateConfirmationOpen",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xe=Object(W.a)(Ge.prototype,"purgeConfirmationOpen",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),et=Object(W.a)(Ge.prototype,"eventName",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=Object(W.a)(Ge.prototype,"eventData",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=Object(W.a)(Ge.prototype,"newCustomStatus",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=Object(W.a)(Ge.prototype,"_selectedTab",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ct.Details}}),nt=Object(W.a)(Ge.prototype,"_sequenceDiagramSvg",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=Object(W.a)(Ge.prototype,"_inProgress",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ot=Object(W.a)(Ge.prototype,"_raiseEventDialogOpen",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),st=Object(W.a)(Ge.prototype,"_setCustomStatusDialogOpen",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lt=Object(W.a)(Ge.prototype,"_autoRefresh",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ge),Pt=Object(h.a)(ft=class extends r.Component{render(){var e=this.props.details;return r.createElement(r.Fragment,null,r.createElement($.a,{container:!0,className:"grid-container"},r.createElement($.a,{item:!0,xs:12,sm:12,md:3,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"name",value:e.name,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"createdTime",value:e.createdTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"lastUpdatedTime",value:e.lastUpdatedTime,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement($.a,{item:!0,xs:12,sm:6,md:2,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"runtimeStatus",value:e.runtimeStatus,margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,className:e.runtimeStatus?"runtime-status-"+e.runtimeStatus.toLowerCase():""})),r.createElement($.a,{item:!0,xs:12,sm:6,md:3,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"customStatus",value:JSON.stringify(e.customStatus),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.createElement($.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"input",value:JSON.stringify(e.input,null,3),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:8})),r.createElement($.a,{item:!0,xs:12,zeroMinWidth:!0,className:"grid-item"},r.createElement(A.a,{label:"output",value:JSON.stringify(e.output,null,3),margin:"normal",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:8}))),r.createElement(ne.a,{className:"history-events-count-label"},"historyEvents: ",e.historyEvents?e.historyEvents.length:0," items"),this.renderTable(e.historyEvents))}renderEmptyTable(){return r.createElement(y.a,{variant:"h5",className:"empty-table-placeholder"},"This list is empty")}renderTable(e){return e&&e.length?r.createElement(ie.a,{size:"small"},r.createElement(oe.a,null,r.createElement(se.a,null,Ee.map(e=>r.createElement(le.a,{key:e},e)))),r.createElement(me.a,null,e.map((e,t)=>{var a,n={verticalAlign:"top"};return r.createElement(se.a,{key:t},r.createElement(le.a,{style:n},e.Timestamp),r.createElement(le.a,{style:n},e.EventType),r.createElement(le.a,{className:"name-cell",style:n},e.SubOrchestrationId?r.createElement(We,{orchestrationId:e.SubOrchestrationId,title:e.FunctionName,backendClient:this.props.backendClient}):null!==(a=e.Name)&&void 0!==a?a:e.FunctionName),r.createElement(le.a,{style:n},e.ScheduledTime),r.createElement(le.a,{className:"long-text-cell",style:n},r.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:JSON.stringify(e.Result)})),r.createElement(le.a,{className:"long-text-cell",style:n},r.createElement(ue.a,{className:"long-text-cell-input",multiline:!0,fullWidth:!0,rowsMax:5,readOnly:!0,value:e.Details})))}))):this.renderEmptyTable()}})||ft,Tt=Object(h.a)(vt=class extends r.Component{componentDidMount(){this.props.state.loadDetails()}render(){var e=this.props.state;return r.createElement(r.Fragment,null,e.inProgress?r.createElement(x.a,null):r.createElement(d.a,{height:4}),r.createElement(g.a,{variant:"dense",className:"top-toolbar"},"Orchestration"===e.details.entityType&&r.createElement(yt,{state:e}),"DurableEntity"===e.details.entityType&&r.createElement(pt,{state:e}),r.createElement(d.a,{width:20}),r.createElement(y.a,{style:{flex:1}}),r.createElement(Q.a,null,r.createElement(Z.a,{htmlFor:"auto-refresh-select"},"Auto-refresh"),r.createElement(ee.a,{className:"toolbar-select",value:e.autoRefresh,onChange:t=>e.autoRefresh=t.target.value,inputProps:{id:"auto-refresh-select"}},r.createElement(S.a,{value:0},"Never"),r.createElement(S.a,{value:1},"Every 1 sec."),r.createElement(S.a,{value:5},"Every 5 sec."),r.createElement(S.a,{value:10},"Every 10 sec."))),r.createElement(d.a,{width:20}),r.createElement(v.a,{className:"details-refresh-button",variant:"outlined",color:"default",size:"large",onClick:()=>e.loadDetails()},r.createElement(pe.a,null))),e.inProgress?r.createElement(x.a,null):r.createElement(d.a,{height:4}),"Orchestration"===e.details.entityType&&r.createElement(r.Fragment,null,r.createElement(p.a,{color:"inherit",position:"static"},r.createElement(ht.a,{value:e.selectedTab,onChange:(t,a)=>e.selectedTab=a},r.createElement(dt.a,{label:"Details",disabled:e.inProgress}),r.createElement(dt.a,{label:"Sequence Diagram",disabled:e.inProgress}))),e.selectedTab===ct.Details&&r.createElement(Pt,{details:e.details,backendClient:e.backendClient}),e.selectedTab===ct.SequenceDiagram&&r.createElement("div",{className:"sequence-diagram",dangerouslySetInnerHTML:{__html:e.sequenceDiagramSvg}})),"DurableEntity"===e.details.entityType&&r.createElement(gt,{details:e.details}),r.createElement(K,{state:this.props.state}))}})||vt,Dt=a(529),jt=a(531),kt=(a(504),Object(h.a)(_t=class extends r.Component{render(){var e=this.props.state;return r.createElement(w.a,{open:e.dialogOpen,onClose:()=>{e.inProgress||(e.dialogOpen=!1)}},r.createElement(M.a,null,"Purge Instance History"),null===e.instancesDeleted&&r.createElement("div",null,r.createElement(P.a,null,e.inProgress?r.createElement(x.a,null):r.createElement(d.a,{height:4}),r.createElement(j.a,null,"WARNING: this operation drops instance states from the underlying storage and cannot be undone.","DurableEntity"===e.entityType&&r.createElement(y.a,{color:"error"},"It might as well remove Durable Entities, that are still active. Ensure that you specify the correct time frame!")),r.createElement(Q.a,{className:"purge-history-statuses",disabled:e.inProgress,fullWidth:!0},r.createElement(Dt.a,null,"Apply to:"),r.createElement(te.a,{row:!0,value:e.entityType,onChange:t=>e.entityType=t.target.value},r.createElement(ae.a,{disabled:e.inProgress,value:"Orchestration",control:r.createElement(re.a,null),label:"Orchestrations"}),r.createElement(ae.a,{disabled:e.inProgress,value:"DurableEntity",control:r.createElement(re.a,null),label:"Durable Entities"}))),r.createElement(he.a,{className:"purge-history-from-input",ampm:!1,autoOk:!0,label:"From (UTC)",format:"YYYY-MM-DD HH:mm:ss",variant:"inline",disabled:e.inProgress,value:e.timeFrom,onChange:t=>e.timeFrom=be.momentAsUtc(t)}),r.createElement(he.a,{className:"purge-history-till-input",ampm:!1,autoOk:!0,label:"Till (UTC)",format:"YYYY-MM-DD HH:mm:ss",variant:"inline",disabled:e.inProgress,value:e.timeTill,onChange:t=>e.timeTill=be.momentAsUtc(t)}),r.createElement(Q.a,{className:"purge-history-statuses",disabled:e.inProgress},r.createElement(Dt.a,null,"With the following status:"),"Orchestration"===e.entityType&&r.createElement(jt.a,{row:!0},r.createElement(It,{state:e,runtimeStatus:"Completed"}),r.createElement(It,{state:e,runtimeStatus:"Failed"}),r.createElement(It,{state:e,runtimeStatus:"Terminated"})),"DurableEntity"===e.entityType&&r.createElement(jt.a,{row:!0},r.createElement(_.a,{title:"Durable Entities are always in 'Running' state"},r.createElement(ae.a,{control:r.createElement(X.a,{checked:!0}),label:"Running",disabled:!0})))),r.createElement(K,{state:e})),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.dialogOpen=!1,disabled:e.inProgress,color:"primary"},"Cancel"),r.createElement(v.a,{onClick:()=>e.purgeHistory(),disabled:!e.isValid||e.inProgress,color:"secondary"},"Purge"))),null!==e.instancesDeleted&&r.createElement("div",null,r.createElement(P.a,null,r.createElement(j.a,{className:"success-message"},e.instancesDeleted," instances were deleted.")),r.createElement(z.a,null,r.createElement(v.a,{onClick:()=>e.dialogOpen=!1,color:"primary"},"Close"))))}})||_t),It=Object(h.a)(Ct=class extends r.Component{render(){var e=this.props.state,t=this.props.runtimeStatus;return r.createElement(ae.a,{control:r.createElement(X.a,{checked:e.getStatusIncluded(t),onChange:a=>e.setStatusIncluded(t,a.target.checked)}),label:t})}})||Ct,Nt=a(505),Ft=Object(h.a)(St=class extends r.Component{render(){var e=this.props.state;return r.createElement(O.a,{utils:f.a},r.createElement(r.Fragment,null,!e.loginState&&r.createElement(d.a,{height:20}),!!e.loginState&&r.createElement(p.a,{position:"static",color:"default",className:"app-bar"},r.createElement(g.a,null,e.loginState.isLoggedIn&&!!e.mainMenuState&&r.createElement(G,{state:e.mainMenuState}),r.createElement("img",{src:Nt,width:"30px"}),r.createElement(d.a,{width:5}),r.createElement(y.a,{variant:"h6",color:"inherit",className:"title-typography"},"Durable Functions Monitor"),r.createElement(b.a,{color:"inherit"},r.createElement(E.a,{color:"inherit",href:""},"/ instances"),!!e.orchestrationDetailsState&&r.createElement(y.a,{color:"inherit"},e.orchestrationDetailsState.orchestrationId)),r.createElement(y.a,{style:{flex:1}}),r.createElement(N,{state:e.loginState}))),!!e.orchestrationsState&&(!e.loginState||e.loginState.isLoggedIn)&&r.createElement(ut,{state:e.orchestrationsState}),!!e.orchestrationDetailsState&&(!e.loginState||e.loginState.isLoggedIn)&&r.createElement(Tt,{state:e.orchestrationDetailsState}),r.createElement(kt,{state:e.purgeHistoryDialogState})))}})||St,Mt=a(125),xt=a.n(Mt);class At{get isVsCode(){return!1}constructor(e){this._getAuthorizationHeaderAsync=e}call(e,t,a){return new Promise((r,n)=>{this._getAuthorizationHeaderAsync().then(i=>{xt.a.request({url:"/a/p/i"+t,method:e,data:a,headers:i}).then(e=>{r(e.data)},n)})})}}var zt,Rt,Lt,Wt,Vt,Bt,Ht,qt,Yt,Ut,Jt,Kt,Gt,$t,Qt,Zt,Xt,ea,ta,aa,ra,na,ia=a(593),oa=(zt=V.d.bound,Rt=V.d.bound,Lt=V.d.bound,Wt=class extends Be{get isLoggedIn(){return this._isLoggedIn}get isLoggedInAnonymously(){return!this._userName}get userName(){return this._userName}constructor(){super(),Object(Ve.a)(this,"menuAnchorElement",Vt,this),Object(Ve.a)(this,"_isLoggedIn",Bt,this),Object(Ve.a)(this,"_userName",Ht,this),this._aadApp=void 0,this.login()}login(){var e="".concat("/a/p/i","/easyauth-config");xt.a.get(e).then(this.loginWithEasyAuthConfig,e=>{this.errorMessage="".concat(e.message,".").concat(e.response?e.response.data:"")})}logout(){this.menuAnchorElement=void 0,this._aadApp.logout()}getAuthorizationHeaderAsync(){return this._aadApp?new Promise((e,t)=>{var a={scopes:[this._aadApp.getCurrentConfiguration().auth.clientId]};this._aadApp.acquireTokenSilent(a).then(t=>{var a=t.accessToken;a||(console.log("DFM: accessToken is null, so using idToken.rawIdToken instead"),a=t.idToken.rawIdToken),e({Authorization:"Bearer ".concat(a)})},e=>{console.log("DFM: acquireTokenSilent() failed (".concat(e,"), so calling acquireTokenRedirect()...")),this._aadApp.acquireTokenRedirect(a)})}):new Promise((e,t)=>e())}loginWithEasyAuthConfig(e){var t=e.data;if(t.clientId){this._aadApp=new ia.a({auth:{clientId:t.clientId,authority:t.authority}}),this._aadApp.handleRedirectCallback(()=>{},this.handleRedirectCallbackFailed);var a=this._aadApp.getAccount();a?(this._userName=a.userName,this._isLoggedIn=!0):(console.log("DFM: redirecting user to AAD for login..."),this._aadApp.loginRedirect())}else this._isLoggedIn=!0}handleRedirectCallbackFailed(e,t){this.errorMessage="Failed to handle login redirect. name: ".concat(e.name,", message: ").concat(e.message,", errorCode: ").concat(e.errorCode,", errorMessage: ").concat(e.errorMessage,", accountState: ").concat(t)}},Object(W.a)(Wt.prototype,"isLoggedIn",[V.e],Object.getOwnPropertyDescriptor(Wt.prototype,"isLoggedIn"),Wt.prototype),Object(W.a)(Wt.prototype,"isLoggedInAnonymously",[V.e],Object.getOwnPropertyDescriptor(Wt.prototype,"isLoggedInAnonymously"),Wt.prototype),Object(W.a)(Wt.prototype,"userName",[V.e],Object.getOwnPropertyDescriptor(Wt.prototype,"userName"),Wt.prototype),Vt=Object(W.a)(Wt.prototype,"menuAnchorElement",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(W.a)(Wt.prototype,"getAuthorizationHeaderAsync",[zt],Object.getOwnPropertyDescriptor(Wt.prototype,"getAuthorizationHeaderAsync"),Wt.prototype),Bt=Object(W.a)(Wt.prototype,"_isLoggedIn",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ht=Object(W.a)(Wt.prototype,"_userName",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(W.a)(Wt.prototype,"loginWithEasyAuthConfig",[Rt],Object.getOwnPropertyDescriptor(Wt.prototype,"loginWithEasyAuthConfig"),Wt.prototype),Object(W.a)(Wt.prototype,"handleRedirectCallbackFailed",[Lt],Object.getOwnPropertyDescriptor(Wt.prototype,"handleRedirectCallbackFailed"),Wt.prototype),Wt),sa=(qt=class extends Be{get inProgress(){return this._inProgress}get isReadonly(){return this._isReadOnly}get isDirty(){return this.connectionString!==this._oldConnectionString||this.hubName!==this._oldHubName}constructor(e,t){super(),this._backendClient=e,this._purgeHistoryDialogState=t,Object(Ve.a)(this,"menuAnchorElement",Yt,this),Object(Ve.a)(this,"hubName",Ut,this),Object(Ve.a)(this,"connectionString",Jt,this),Object(Ve.a)(this,"connectionParamsDialogOpen",Kt,this),Object(Ve.a)(this,"_inProgress",Gt,this),Object(Ve.a)(this,"_isReadOnly",$t,this),this._oldConnectionString=void 0,this._oldHubName=void 0}showConnectionParamsDialog(){this.menuAnchorElement=void 0,this.connectionParamsDialogOpen=!0,this._inProgress=!0,this._backendClient.call("GET","/manage-connection").then(e=>{this.connectionString=this._oldConnectionString=e.connectionString,this.hubName=this._oldHubName=e.hubName,this._isReadOnly=e.isReadOnly},e=>{this.errorMessage="Load failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}saveConnectionParams(){this._inProgress=!0,this._backendClient.call("PUT","/manage-connection",{connectionString:this.connectionString!==this._oldConnectionString?this.connectionString:"",hubName:this.hubName}).then(()=>{this.connectionParamsDialogOpen=!1,alert("Your changes were saved to local.settings.json file, but they cannot be picked up automatically. Please, restart the Function Host for them to take effect.")},e=>{this.errorMessage="Save failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}showPurgeHistoryDialog(){this.menuAnchorElement=void 0,this._purgeHistoryDialogState.dialogOpen=!0}setWindowTitle(){this._backendClient.call("GET","/about").then(e=>{document.title="Durable Functions Monitor (".concat(e.accountName,"/").concat(e.hubName,") v").concat(e.version)})}},Yt=Object(W.a)(qt.prototype,"menuAnchorElement",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=Object(W.a)(qt.prototype,"hubName",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt=Object(W.a)(qt.prototype,"connectionString",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=Object(W.a)(qt.prototype,"connectionParamsDialogOpen",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(W.a)(qt.prototype,"inProgress",[V.e],Object.getOwnPropertyDescriptor(qt.prototype,"inProgress"),qt.prototype),Object(W.a)(qt.prototype,"isReadonly",[V.e],Object.getOwnPropertyDescriptor(qt.prototype,"isReadonly"),qt.prototype),Object(W.a)(qt.prototype,"isDirty",[V.e],Object.getOwnPropertyDescriptor(qt.prototype,"isDirty"),qt.prototype),Gt=Object(W.a)(qt.prototype,"_inProgress",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$t=Object(W.a)(qt.prototype,"_isReadOnly",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qt),la=(Qt=class extends Be{get dialogOpen(){return this._dialogOpen}set dialogOpen(e){this._dialogOpen=e,e&&(this._instancesDeleted=null,this.timeFrom=ye()().subtract(1,"days").utc(),this.timeTill=ye()().utc(),this._statuses=new Set(["Completed","Terminated"]),this.entityType="Orchestration")}get instancesDeleted(){return this._instancesDeleted}get inProgress(){return this._inProgress}get isValid(){return this._statuses.size>0&&be.isValidMoment(this.timeFrom)&&be.isValidMoment(this.timeTill)}constructor(e){super(),this._backendClient=e,Object(Ve.a)(this,"timeFrom",Zt,this),Object(Ve.a)(this,"timeTill",Xt,this),Object(Ve.a)(this,"entityType",ea,this),Object(Ve.a)(this,"_statuses",ta,this),Object(Ve.a)(this,"_dialogOpen",aa,this),Object(Ve.a)(this,"_inProgress",ra,this),Object(Ve.a)(this,"_instancesDeleted",na,this)}purgeHistory(){this._inProgress=!0,this._backendClient.call("POST","/purge-history",{entityType:this.entityType,timeFrom:this.timeFrom.toISOString(),timeTill:this.timeTill.toISOString(),statuses:Array.from(this._statuses.values())}).then(e=>{this._instancesDeleted=e.instancesDeleted},e=>{this.errorMessage="Purge history failed: ".concat(e.message,".").concat(e.response?e.response.data:""," ")}).finally(()=>{this._inProgress=!1})}getStatusIncluded(e){return this._statuses.has(e)}setStatusIncluded(e,t){t?this._statuses.add(e):this._statuses.delete(e)}},Object(W.a)(Qt.prototype,"dialogOpen",[V.e],Object.getOwnPropertyDescriptor(Qt.prototype,"dialogOpen"),Qt.prototype),Object(W.a)(Qt.prototype,"instancesDeleted",[V.e],Object.getOwnPropertyDescriptor(Qt.prototype,"instancesDeleted"),Qt.prototype),Object(W.a)(Qt.prototype,"inProgress",[V.e],Object.getOwnPropertyDescriptor(Qt.prototype,"inProgress"),Qt.prototype),Object(W.a)(Qt.prototype,"isValid",[V.e],Object.getOwnPropertyDescriptor(Qt.prototype,"isValid"),Qt.prototype),Zt=Object(W.a)(Qt.prototype,"timeFrom",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xt=Object(W.a)(Qt.prototype,"timeTill",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ea=Object(W.a)(Qt.prototype,"entityType",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Orchestration"}}),ta=Object(W.a)(Qt.prototype,"_statuses",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),aa=Object(W.a)(Qt.prototype,"_dialogOpen",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ra=Object(W.a)(Qt.prototype,"_inProgress",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),na=Object(W.a)(Qt.prototype,"_instancesDeleted",[V.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qt);class ca{constructor(e){this._prefix=e}setItem(e,t){localStorage.setItem("".concat(this._prefix,"::").concat(e),t)}setItems(e){var t,a=Object(bt.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;null===r.value?localStorage.removeItem("".concat(this._prefix,"::").concat(r.fieldName)):localStorage.setItem("".concat(this._prefix,"::").concat(r.fieldName),r.value)}}catch(n){a.e(n)}finally{a.f()}}getItem(e){return localStorage.getItem("".concat(this._prefix,"::").concat(e))}removeItem(e){localStorage.removeItem("".concat(this._prefix,"::").concat(e))}}class ma{get isVsCode(){return!0}constructor(e){this._vsCodeApi=e,this._handlers={},this._requests={},window.addEventListener("message",e=>{var t=e.data,a=this._handlers[t.id];if(a)try{a(t.data)}catch(n){console.log("Failed to handle response from VsCode: "+n)}else{var r=this._requests[t.id];r&&(t.err?r.reject(t.err):r.resolve(t.data),delete this._requests[t.id])}})}call(e,t,a){var r=Math.random().toString();return this._vsCodeApi.postMessage({id:r,method:e,url:t,data:a}),new Promise((e,t)=>{this._requests[r]={resolve:e,reject:t}})}setPurgeHistoryHandler(e){this._handlers.purgeHistory=e,this._vsCodeApi.postMessage({method:"IAmReady"})}}class ua{constructor(e,t){this._prefix=e,this._vsCodeApi=t;var a=this._vsCodeApi.getState();ua.State=a||{}}setItem(e,t){ua.State["".concat(this._prefix,"::").concat(e)]=t,this._vsCodeApi.setState(ua.State)}setItems(e){var t,a=Object(bt.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;null===r.value?delete ua.State["".concat(this._prefix,"::").concat(r.fieldName)]:ua.State["".concat(this._prefix,"::").concat(r.fieldName)]=r.value}}catch(n){a.e(n)}finally{a.f()}this._vsCodeApi.setState(ua.State)}getItem(e){return ua.State["".concat(this._prefix,"::").concat(e)]}removeItem(e){delete ua.State["".concat(this._prefix,"::").concat(e)],this._vsCodeApi.setState(ua.State)}}ua.State={};var ha=new class{constructor(){this.loginState=void 0,this.mainMenuState=void 0,this.orchestrationsState=void 0,this.orchestrationDetailsState=void 0,this.purgeHistoryDialogState=void 0;var e=void 0;try{e=acquireVsCodeApi()}catch(r){}if(e){var t=new ma(e);this.purgeHistoryDialogState=new la(t),this.orchestrationId?this.orchestrationDetailsState=new wt(this.orchestrationId,t,new ua("OrchestrationDetailsState",e)):(this.orchestrationsState=new mt(t,new ua("OrchestrationsState",e)),t.setPurgeHistoryHandler(()=>this.purgeHistoryDialogState.dialogOpen=!0))}else{this.loginState=new oa;var a=new At(this.loginState.getAuthorizationHeaderAsync);this.purgeHistoryDialogState=new la(a),this.orchestrationId?this.orchestrationDetailsState=new wt(this.orchestrationId,a,new ca("OrchestrationDetailsState")):(this.mainMenuState=new sa(a,this.purgeHistoryDialogState),this.orchestrationsState=new mt(a,new ca("OrchestrationsState")))}}get orchestrationId(){if(OrchestrationIdFromVsCode)return OrchestrationIdFromVsCode;return window.location.pathname.startsWith("/orchestrations/")?window.location.pathname.substr("/orchestrations/".length):""}};n.render(r.createElement(Ft,{state:ha}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",()=>{var e="".concat("","/service-worker.js");i?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):o(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):o(e)})}}()}},[[272,1,2]]]);
//# sourceMappingURL=main.e8f9683a.chunk.js.map